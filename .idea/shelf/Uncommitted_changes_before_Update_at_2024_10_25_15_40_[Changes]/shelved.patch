Index: club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectCategoryDomainService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.domain.service;\r\n\r\nimport edu.cugb.subject.domain.entity.SubjectCategoryBO;\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\n\r\nimport java.util.List;\r\n\r\n/**\r\n * @Author pengjia\r\n * @Data 2024/10/17 12:43\r\n * @Description:\r\n */\r\npublic interface SubjectCategoryDomainService {\r\n\r\n    void add(SubjectCategoryBO subjectCategoryBO);\r\n\r\n    /**\r\n     * 查询岗位分类\r\n     *\r\n     * @param subjectCategoryBO\r\n     * @return\r\n     */\r\n    List<SubjectCategoryBO> queryCategory(SubjectCategoryBO subjectCategoryBO);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectCategoryDomainService.java b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectCategoryDomainService.java
--- a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectCategoryDomainService.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectCategoryDomainService.java	(date 1729748469611)
@@ -1,7 +1,6 @@
 package edu.cugb.subject.domain.service;
 
 import edu.cugb.subject.domain.entity.SubjectCategoryBO;
-import edu.cugb.subject.infra.basic.entity.SubjectCategory;
 
 import java.util.List;
 
@@ -12,6 +11,10 @@
  */
 public interface SubjectCategoryDomainService {
 
+    /**
+     * 新增分类
+     * @param subjectCategoryBO
+     */
     void add(SubjectCategoryBO subjectCategoryBO);
 
     /**
@@ -21,4 +24,19 @@
      * @return
      */
     List<SubjectCategoryBO> queryCategory(SubjectCategoryBO subjectCategoryBO);
+
+    /**
+     * 更新分类
+     * @param subjectCategoryBO
+     * @return
+     */
+    Boolean update(SubjectCategoryBO subjectCategoryBO);
+
+    /**
+     * 删除分类
+     *
+     * @param subjectCategoryBO
+     * @return
+     */
+    Boolean delete(SubjectCategoryBO subjectCategoryBO);
 }
Index: club-subject/club-common/pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <parent>\r\n        <groupId>edu.cugb</groupId>\r\n        <artifactId>club-subject</artifactId>\r\n        <version>1.0-SNAPSHOT</version>\r\n    </parent>\r\n\r\n    <artifactId>club-common</artifactId>\r\n\r\n    <properties>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <maven.compiler.source>1.8</maven.compiler.source>\r\n        <maven.compiler.target>1.8</maven.compiler.target>\r\n        <maven.compiler.compilerVersion>1.8</maven.compiler.compilerVersion>\r\n    </properties>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.projectlombok</groupId>\r\n            <artifactId>lombok</artifactId>\r\n            <version>1.18.30</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.mapstruct</groupId>\r\n            <artifactId>mapstruct</artifactId>\r\n            <version>1.4.2.Final</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.mapstruct</groupId>\r\n            <artifactId>mapstruct-processor</artifactId>\r\n            <version>1.4.2.Final</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-log4j2</artifactId>\r\n            <version>2.4.2</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.alibaba</groupId>\r\n            <artifactId>fastjson</artifactId>\r\n            <version>1.2.24</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.google.guava</groupId>\r\n            <artifactId>guava</artifactId>\r\n            <version>19.0</version>\r\n        </dependency>\r\n\r\n\r\n    </dependencies>\r\n\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-common/pom.xml b/club-subject/club-common/pom.xml
--- a/club-subject/club-common/pom.xml	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-common/pom.xml	(date 1729744904560)
@@ -49,6 +49,11 @@
             <artifactId>guava</artifactId>
             <version>19.0</version>
         </dependency>
+        <dependency>
+            <groupId>org.apache.commons</groupId>
+            <artifactId>commons-lang3</artifactId>
+            <version>3.11</version>
+        </dependency>
 
 
     </dependencies>
Index: club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectCategoryDomainServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.domain.service.impl;\r\n\r\nimport com.alibaba.fastjson.JSON;\r\nimport edu.cugb.subject.domain.convert.SubjectCategoryConverter;\r\nimport edu.cugb.subject.domain.entity.SubjectCategoryBO;\r\nimport edu.cugb.subject.domain.service.SubjectCategoryDomainService;\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\nimport edu.cugb.subject.infra.basic.service.SubjectCategoryService;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.Resource;\r\nimport java.util.List;\r\n\r\n/**\r\n * @Author pengjia\r\n * @Data 2024/10/17 14:39\r\n * @Description:\r\n */\r\n@Service\r\n@Slf4j\r\npublic class SubjectCategoryDomainServiceImpl implements SubjectCategoryDomainService {\r\n    @Resource\r\n    private SubjectCategoryService subjectCategoryService;\r\n\r\n    @Override\r\n    public void add(SubjectCategoryBO subjectCategoryBO) {\r\n        if (log.isInfoEnabled()) {\r\n            log.info(\"SubjectCategoryController.add.bo:{}\", JSON.toJSONString(subjectCategoryBO));\r\n        }\r\n        SubjectCategory subjectCategory = SubjectCategoryConverter.INSTANCE\r\n                .convertBOToCategory(subjectCategoryBO);\r\n        subjectCategoryService.insert(subjectCategory);\r\n\r\n    }\r\n\r\n    @Override\r\n    public List<SubjectCategoryBO> queryCategory(SubjectCategoryBO subjectCategoryBO) {\r\n        SubjectCategory subjectCategory = SubjectCategoryConverter.INSTANCE\r\n                .convertBOToCategory(subjectCategoryBO);\r\n\r\n        List<SubjectCategory> subjectCategoryList = subjectCategoryService.queryCategory(subjectCategory);\r\n\r\n        List<SubjectCategoryBO> boList = SubjectCategoryConverter.INSTANCE\r\n                .convertCategoryToBO(subjectCategoryList);\r\n\r\n        if (log.isInfoEnabled()) {\r\n            log.info(\"SubjectCategoryController.queryPrimaryCategory.boList:{}\",\r\n                    JSON.toJSONString(boList));\r\n        }\r\n        return boList;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectCategoryDomainServiceImpl.java b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectCategoryDomainServiceImpl.java
--- a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectCategoryDomainServiceImpl.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectCategoryDomainServiceImpl.java	(date 1729744904450)
@@ -1,6 +1,9 @@
 package edu.cugb.subject.domain.service.impl;
 
 import com.alibaba.fastjson.JSON;
+import com.sun.org.apache.xpath.internal.operations.Bool;
+import edu.cugb.subject.common.enums.CategoryTypeEnum;
+import edu.cugb.subject.common.enums.IsDeletedFlagEnum;
 import edu.cugb.subject.domain.convert.SubjectCategoryConverter;
 import edu.cugb.subject.domain.entity.SubjectCategoryBO;
 import edu.cugb.subject.domain.service.SubjectCategoryDomainService;
@@ -23,6 +26,10 @@
     @Resource
     private SubjectCategoryService subjectCategoryService;
 
+    /**
+     * 新增分类
+     * @param subjectCategoryBO
+     */
     @Override
     public void add(SubjectCategoryBO subjectCategoryBO) {
         if (log.isInfoEnabled()) {
@@ -30,14 +37,21 @@
         }
         SubjectCategory subjectCategory = SubjectCategoryConverter.INSTANCE
                 .convertBOToCategory(subjectCategoryBO);
+        subjectCategory.setIsDeleted(IsDeletedFlagEnum.Un_DELETED.getCode());
         subjectCategoryService.insert(subjectCategory);
 
     }
 
+    /**
+     * 查询分类
+     * @param subjectCategoryBO
+     * @return
+     */
     @Override
     public List<SubjectCategoryBO> queryCategory(SubjectCategoryBO subjectCategoryBO) {
         SubjectCategory subjectCategory = SubjectCategoryConverter.INSTANCE
                 .convertBOToCategory(subjectCategoryBO);
+        subjectCategory.setIsDeleted(IsDeletedFlagEnum.Un_DELETED.getCode());
 
         List<SubjectCategory> subjectCategoryList = subjectCategoryService.queryCategory(subjectCategory);
 
@@ -50,4 +64,33 @@
         }
         return boList;
     }
+
+    /**
+     * 更新分类
+     * @param subjectCategoryBO
+     * @return
+     */
+    @Override
+    public Boolean update(SubjectCategoryBO subjectCategoryBO) {
+        SubjectCategory subjectCategory = SubjectCategoryConverter.INSTANCE
+                .convertBOToCategory(subjectCategoryBO);
+        int count = subjectCategoryService.update(subjectCategory);
+        return count > 0;
+    }
+
+    /**
+     * 删除分类
+     *
+     * @param subjectCategoryBO
+     * @return
+     */
+    @Override
+    public Boolean delete(SubjectCategoryBO subjectCategoryBO) {
+        SubjectCategory subjectCategory = SubjectCategoryConverter.INSTANCE
+                .convertBOToCategory(subjectCategoryBO);
+        subjectCategory.setIsDeleted(IsDeletedFlagEnum.DELETED.getCode());
+        int delete = subjectCategoryService.delete(subjectCategory);
+        return true;
+
+    }
 }
Index: .idea/easyCodeTableSetting.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"EasyCodeTableSetting\">\r\n    <option name=\"tableInfoMap\">\r\n      <map>\r\n        <entry key=\"jc-club.subject_category\">\r\n          <value>\r\n            <TableInfoDTO>\r\n              <option name=\"comment\" value=\"题目分类\" />\r\n              <option name=\"fullColumn\">\r\n                <list>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"主键\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"id\" />\r\n                    <option name=\"type\" value=\"java.lang.Long\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"分类名称\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"categoryName\" />\r\n                    <option name=\"type\" value=\"java.lang.String\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"分类类型\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"categoryType\" />\r\n                    <option name=\"type\" value=\"java.lang.Integer\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"图标连接\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"imageUrl\" />\r\n                    <option name=\"type\" value=\"java.lang.String\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"父级id\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"parentId\" />\r\n                    <option name=\"type\" value=\"java.lang.Long\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"创建人\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"createdBy\" />\r\n                    <option name=\"type\" value=\"java.lang.String\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"创建时间\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"createdTime\" />\r\n                    <option name=\"type\" value=\"java.util.Date\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"更新人\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"updateBy\" />\r\n                    <option name=\"type\" value=\"java.lang.String\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"更新时间\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"updateTime\" />\r\n                    <option name=\"type\" value=\"java.util.Date\" />\r\n                  </ColumnInfoDTO>\r\n                  <ColumnInfoDTO>\r\n                    <option name=\"comment\" value=\"是否删除 0: 未删除 1: 已删除\" />\r\n                    <option name=\"custom\" value=\"false\" />\r\n                    <option name=\"ext\" value=\"{}\" />\r\n                    <option name=\"name\" value=\"isDeleted\" />\r\n                    <option name=\"type\" value=\"java.lang.Integer\" />\r\n                  </ColumnInfoDTO>\r\n                </list>\r\n              </option>\r\n              <option name=\"name\" value=\"SubjectCategory\" />\r\n              <option name=\"preName\" value=\"\" />\r\n              <option name=\"saveModelName\" value=\"club-starter\" />\r\n              <option name=\"savePackageName\" value=\"edu.cugb.subject.infra.basic\" />\r\n              <option name=\"savePath\" value=\"./club-subject/club-starter/src/main/java/edu/cugb/subject/infra/basic\" />\r\n              <option name=\"templateGroupName\" value=\"Default\" />\r\n            </TableInfoDTO>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/easyCodeTableSetting.xml b/.idea/easyCodeTableSetting.xml
--- a/.idea/easyCodeTableSetting.xml	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/.idea/easyCodeTableSetting.xml	(date 1729771668049)
@@ -90,6 +90,163 @@
             </TableInfoDTO>
           </value>
         </entry>
+        <entry key="jc-club.subject_label">
+          <value>
+            <TableInfoDTO>
+              <option name="comment" value="题目标签表" />
+              <option name="fullColumn">
+                <list>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="主键" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="id" />
+                    <option name="type" value="java.lang.Long" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="标签分类" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="labelName" />
+                    <option name="type" value="java.lang.String" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="排序" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="sortNum" />
+                    <option name="type" value="java.lang.Integer" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="categoryId" />
+                    <option name="type" value="java.lang.String" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="创建人" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="createdBy" />
+                    <option name="type" value="java.lang.String" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="创建时间" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="createdTime" />
+                    <option name="type" value="java.util.Date" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="更新人" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="updateBy" />
+                    <option name="type" value="java.lang.String" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="更新时间" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="updateTime" />
+                    <option name="type" value="java.util.Date" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="isDeleted" />
+                    <option name="type" value="java.lang.Integer" />
+                  </ColumnInfoDTO>
+                </list>
+              </option>
+              <option name="name" value="SubjectLabel" />
+              <option name="preName" value="" />
+              <option name="saveModelName" value="club-infra" />
+              <option name="savePackageName" value="edu.cugb.subject.infra.basic" />
+              <option name="savePath" value="./club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic" />
+              <option name="templateGroupName" value="Default" />
+            </TableInfoDTO>
+          </value>
+        </entry>
+        <entry key="jc-club.subject_mapping">
+          <value>
+            <TableInfoDTO>
+              <option name="comment" value="题目分类关系表" />
+              <option name="fullColumn">
+                <list>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="主键" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="id" />
+                    <option name="type" value="java.lang.Long" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="题目id" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="subjectId" />
+                    <option name="type" value="java.lang.Long" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="分类id" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="categoryId" />
+                    <option name="type" value="java.lang.Long" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="标签id" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="labelId" />
+                    <option name="type" value="java.lang.Long" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="创建人" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="createdBy" />
+                    <option name="type" value="java.lang.String" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="创建时间" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="createdTime" />
+                    <option name="type" value="java.util.Date" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="修改人" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="updateBy" />
+                    <option name="type" value="java.lang.String" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="comment" value="修改时间" />
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="updateTime" />
+                    <option name="type" value="java.util.Date" />
+                  </ColumnInfoDTO>
+                  <ColumnInfoDTO>
+                    <option name="custom" value="false" />
+                    <option name="ext" value="{}" />
+                    <option name="name" value="isDeleted" />
+                    <option name="type" value="java.lang.Integer" />
+                  </ColumnInfoDTO>
+                </list>
+              </option>
+              <option name="name" value="SubjectMapping" />
+              <option name="preName" value="" />
+              <option name="saveModelName" value="club-infra" />
+              <option name="savePackageName" value="edu.cugb.subject.infra.basic" />
+              <option name="savePath" value="./club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic" />
+              <option name="templateGroupName" value="Default" />
+            </TableInfoDTO>
+          </value>
+        </entry>
       </map>
     </option>
   </component>
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectMappingDao.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectMappingDao.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectMappingDao.java
new file mode 100644
--- /dev/null	(date 1729777134324)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectMappingDao.java	(date 1729777134324)
@@ -0,0 +1,82 @@
+package edu.cugb.subject.infra.basic.mapper;
+
+import edu.cugb.subject.infra.basic.entity.SubjectMapping;
+import org.apache.ibatis.annotations.Param;
+import java.util.List;
+
+/**
+ * 题目分类关系表(SubjectMapping)表数据库访问层
+ *
+ * @author makejava
+ * @since 2024-10-24 20:07:44
+ */
+public interface SubjectMappingDao {
+
+    /**
+     * 通过ID查询单条数据
+     *
+     * @param id 主键
+     * @return 实例对象
+     */
+    SubjectMapping queryById(Long id);
+
+    /**
+     * 查询指定行数据
+     *
+     * @param subjectMapping 查询条件
+     * @return 对象列表
+     */
+    List<SubjectMapping> queryAllByLimit(SubjectMapping subjectMapping);
+
+    /**
+     * 统计总行数
+     *
+     * @param subjectMapping 查询条件
+     * @return 总行数
+     */
+    long count(SubjectMapping subjectMapping);
+
+    /**
+     * 新增数据
+     *
+     * @param subjectMapping 实例对象
+     * @return 影响行数
+     */
+    int insert(SubjectMapping subjectMapping);
+
+    /**
+     * 批量新增数据（MyBatis原生foreach方法）
+     *
+     * @param entities List<SubjectMapping> 实例对象列表
+     * @return 影响行数
+     */
+    int insertBatch(@Param("entities") List<SubjectMapping> entities);
+
+    /**
+     * 批量新增或按主键更新数据（MyBatis原生foreach方法）
+     *
+     * @param entities List<SubjectMapping> 实例对象列表
+     * @return 影响行数
+     * @throws org.springframework.jdbc.BadSqlGrammarException 入参是空List的时候会抛SQL语句错误的异常，请自行校验入参
+     */
+    int insertOrUpdateBatch(@Param("entities") List<SubjectMapping> entities);
+
+    /**
+     * 修改数据
+     *
+     * @param subjectMapping 实例对象
+     * @return 影响行数
+     */
+    int update(SubjectMapping subjectMapping);
+
+    /**
+     * 通过主键删除数据
+     *
+     * @param id 主键
+     * @return 影响行数
+     */
+    int deleteById(Long id);
+
+    List<SubjectMapping> queryDistinctLabelId(SubjectMapping subjectMapping);
+}
+
Index: club-subject/club-infra/src/main/resources/mapper/SubjectMappingDao.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/resources/mapper/SubjectMappingDao.xml b/club-subject/club-infra/src/main/resources/mapper/SubjectMappingDao.xml
new file mode 100644
--- /dev/null	(date 1729777225105)
+++ b/club-subject/club-infra/src/main/resources/mapper/SubjectMappingDao.xml	(date 1729777225105)
@@ -0,0 +1,209 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
+<mapper namespace="edu.cugb.subject.infra.basic.mapper.SubjectMappingDao">
+
+    <resultMap type="edu.cugb.subject.infra.basic.entity.SubjectMapping" id="SubjectMappingMap">
+        <result property="id" column="id" jdbcType="INTEGER"/>
+        <result property="subjectId" column="subject_id" jdbcType="INTEGER"/>
+        <result property="categoryId" column="category_id" jdbcType="INTEGER"/>
+        <result property="labelId" column="label_id" jdbcType="INTEGER"/>
+        <result property="createdBy" column="created_by" jdbcType="VARCHAR"/>
+        <result property="createdTime" column="created_time" jdbcType="TIMESTAMP"/>
+        <result property="updateBy" column="update_by" jdbcType="VARCHAR"/>
+        <result property="updateTime" column="update_time" jdbcType="TIMESTAMP"/>
+        <result property="isDeleted" column="is_deleted" jdbcType="INTEGER"/>
+    </resultMap>
+
+    <!--查询单个-->
+    <select id="queryById" resultMap="SubjectMappingMap">
+        select id,
+               subject_id,
+               category_id,
+               label_id,
+               created_by,
+               created_time,
+               update_by,
+               update_time,
+               is_deleted
+        from subject_mapping
+        where id = #{id}
+    </select>
+
+    <!--查询指定行数据-->
+    <select id="queryAllByLimit" resultMap="SubjectMappingMap">
+        select
+        id,
+        subject_id,
+        category_id,
+        label_id,
+        created_by,
+        created_time,
+        update_by,
+        update_time,
+        is_deleted
+        from subject_mapping
+        <where>
+            <if test="id != null">
+                and id = #{id}
+            </if>
+            <if test="subjectId != null">
+                and subject_id = #{subjectId}
+            </if>
+            <if test="categoryId != null">
+                and category_id = #{categoryId}
+            </if>
+            <if test="labelId != null">
+                and label_id = #{labelId}
+            </if>
+            <if test="createdBy != null and createdBy != ''">
+                and created_by = #{createdBy}
+            </if>
+            <if test="createdTime != null">
+                and created_time = #{createdTime}
+            </if>
+            <if test="updateBy != null and updateBy != ''">
+                and update_by = #{updateBy}
+            </if>
+            <if test="updateTime != null">
+                and update_time = #{updateTime}
+            </if>
+            <if test="isDeleted != null">
+                and is_deleted = #{isDeleted}
+            </if>
+        </where>
+        limit #{pageable.offset}, #{pageable.pageSize}
+    </select>
+
+    <!--统计总行数-->
+    <select id="count" resultType="java.lang.Long">
+        select count(1)
+        from subject_mapping
+        <where>
+            <if test="id != null">
+                and id = #{id}
+            </if>
+            <if test="subjectId != null">
+                and subject_id = #{subjectId}
+            </if>
+            <if test="categoryId != null">
+                and category_id = #{categoryId}
+            </if>
+            <if test="labelId != null">
+                and label_id = #{labelId}
+            </if>
+            <if test="createdBy != null and createdBy != ''">
+                and created_by = #{createdBy}
+            </if>
+            <if test="createdTime != null">
+                and created_time = #{createdTime}
+            </if>
+            <if test="updateBy != null and updateBy != ''">
+                and update_by = #{updateBy}
+            </if>
+            <if test="updateTime != null">
+                and update_time = #{updateTime}
+            </if>
+            <if test="isDeleted != null">
+                and is_deleted = #{isDeleted}
+            </if>
+        </where>
+    </select>
+    <select id="queryDistinctLabelId" resultMap="SubjectMappingMap">
+        select
+        distinct label_id
+        from subject_mapping
+        <where>
+            <if test="id != null">
+                and id = #{id}
+            </if>
+            <if test="subjectId != null">
+                and subject_id = #{subjectId}
+            </if>
+            <if test="categoryId != null">
+                and category_id = #{categoryId}
+            </if>
+            <if test="labelId != null">
+                and label_id = #{labelId}
+            </if>
+            <if test="createdBy != null and createdBy != ''">
+                and created_by = #{createdBy}
+            </if>
+            <if test="createdTime != null">
+                and created_time = #{createdTime}
+            </if>
+            <if test="updateBy != null and updateBy != ''">
+                and update_by = #{updateBy}
+            </if>
+            <if test="updateTime != null">
+                and update_time = #{updateTime}
+            </if>
+            <if test="isDeleted != null">
+                and is_deleted = #{isDeleted}
+            </if>
+        </where>
+
+    </select>
+
+    <!--新增所有列-->
+    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
+        insert into subject_mapping(subject_id,category_id,label_id,created_by,created_time,update_by,update_time,is_deleted)
+        values (#{subjectId},#{categoryId},#{labelId},#{createdBy},#{createdTime},#{updateBy},#{updateTime},#{isDeleted})
+    </insert>
+
+    <insert id="insertBatch" keyProperty="id" useGeneratedKeys="true">
+        insert into subject_mapping(subject_id,category_id,label_id,created_by,created_time,update_by,update_time,is_deleted)
+        values
+        <foreach collection="entities" item="entity" separator=",">
+        (#{entity.subjectId},#{entity.categoryId},#{entity.labelId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})
+        </foreach>
+    </insert>
+
+    <insert id="insertOrUpdateBatch" keyProperty="id" useGeneratedKeys="true">
+        insert into subject_mapping(subject_id,category_id,label_id,created_by,created_time,update_by,update_time,is_deleted)
+        values
+        <foreach collection="entities" item="entity" separator=",">
+            (#{entity.subjectId},#{entity.categoryId},#{entity.labelId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})
+        </foreach>
+        on duplicate key update
+subject_id = values(subject_id),category_id = values(category_id),label_id = values(label_id),created_by = values(created_by),created_time = values(created_time),update_by = values(update_by),update_time = values(update_time),is_deleted = values(is_deleted)
+    </insert>
+
+    <!--通过主键修改数据-->
+    <update id="update">
+        update subject_mapping
+        <set>
+            <if test="subjectId != null">
+                subject_id = #{subjectId},
+            </if>
+            <if test="categoryId != null">
+                category_id = #{categoryId},
+            </if>
+            <if test="labelId != null">
+                label_id = #{labelId},
+            </if>
+            <if test="createdBy != null and createdBy != ''">
+                created_by = #{createdBy},
+            </if>
+            <if test="createdTime != null">
+                created_time = #{createdTime},
+            </if>
+            <if test="updateBy != null and updateBy != ''">
+                update_by = #{updateBy},
+            </if>
+            <if test="updateTime != null">
+                update_time = #{updateTime},
+            </if>
+            <if test="isDeleted != null">
+                is_deleted = #{isDeleted},
+            </if>
+        </set>
+        where id = #{id}
+    </update>
+
+    <!--通过主键删除-->
+    <delete id="deleteById">
+        delete from subject_mapping where id = #{id}
+    </delete>
+
+</mapper>
+
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectMapping.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectMapping.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectMapping.java
new file mode 100644
--- /dev/null	(date 1729771667392)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectMapping.java	(date 1729771667392)
@@ -0,0 +1,123 @@
+package edu.cugb.subject.infra.basic.entity;
+
+import java.util.Date;
+import java.io.Serializable;
+
+/**
+ * 题目分类关系表(SubjectMapping)实体类
+ *
+ * @author makejava
+ * @since 2024-10-24 20:07:44
+ */
+public class SubjectMapping implements Serializable {
+    private static final long serialVersionUID = -53233559033990753L;
+/**
+     * 主键
+     */
+    private Long id;
+/**
+     * 题目id
+     */
+    private Long subjectId;
+/**
+     * 分类id
+     */
+    private Long categoryId;
+/**
+     * 标签id
+     */
+    private Long labelId;
+/**
+     * 创建人
+     */
+    private String createdBy;
+/**
+     * 创建时间
+     */
+    private Date createdTime;
+/**
+     * 修改人
+     */
+    private String updateBy;
+/**
+     * 修改时间
+     */
+    private Date updateTime;
+
+    private Integer isDeleted;
+
+
+    public Long getId() {
+        return id;
+    }
+
+    public void setId(Long id) {
+        this.id = id;
+    }
+
+    public Long getSubjectId() {
+        return subjectId;
+    }
+
+    public void setSubjectId(Long subjectId) {
+        this.subjectId = subjectId;
+    }
+
+    public Long getCategoryId() {
+        return categoryId;
+    }
+
+    public void setCategoryId(Long categoryId) {
+        this.categoryId = categoryId;
+    }
+
+    public Long getLabelId() {
+        return labelId;
+    }
+
+    public void setLabelId(Long labelId) {
+        this.labelId = labelId;
+    }
+
+    public String getCreatedBy() {
+        return createdBy;
+    }
+
+    public void setCreatedBy(String createdBy) {
+        this.createdBy = createdBy;
+    }
+
+    public Date getCreatedTime() {
+        return createdTime;
+    }
+
+    public void setCreatedTime(Date createdTime) {
+        this.createdTime = createdTime;
+    }
+
+    public String getUpdateBy() {
+        return updateBy;
+    }
+
+    public void setUpdateBy(String updateBy) {
+        this.updateBy = updateBy;
+    }
+
+    public Date getUpdateTime() {
+        return updateTime;
+    }
+
+    public void setUpdateTime(Date updateTime) {
+        this.updateTime = updateTime;
+    }
+
+    public Integer getIsDeleted() {
+        return isDeleted;
+    }
+
+    public void setIsDeleted(Integer isDeleted) {
+        this.isDeleted = isDeleted;
+    }
+
+}
+
Index: club-subject/club-infra/target/classes/mapper/SubjectCategoryDao.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\r\n<mapper namespace=\"edu.cugb.subject.infra.basic.mapper.SubjectCategoryDao\">\r\n\r\n    <resultMap type=\"edu.cugb.subject.infra.basic.entity.SubjectCategory\" id=\"SubjectCategoryMap\">\r\n        <result property=\"id\" column=\"id\" jdbcType=\"INTEGER\"/>\r\n        <result property=\"categoryName\" column=\"category_name\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"categoryType\" column=\"category_type\" jdbcType=\"INTEGER\"/>\r\n        <result property=\"imageUrl\" column=\"image_url\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"parentId\" column=\"parent_id\" jdbcType=\"INTEGER\"/>\r\n        <result property=\"createdBy\" column=\"created_by\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"createdTime\" column=\"created_time\" jdbcType=\"TIMESTAMP\"/>\r\n        <result property=\"updateBy\" column=\"update_by\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"updateTime\" column=\"update_time\" jdbcType=\"TIMESTAMP\"/>\r\n        <result property=\"isDeleted\" column=\"is_deleted\" jdbcType=\"INTEGER\"/>\r\n    </resultMap>\r\n\r\n    <!--查询单个-->\r\n    <select id=\"queryById\" resultMap=\"SubjectCategoryMap\">\r\n        select id,\r\n               category_name,\r\n               category_type,\r\n               image_url,\r\n               parent_id,\r\n               created_by,\r\n               created_time,\r\n               update_by,\r\n               update_time,\r\n               is_deleted\r\n        from subject_category\r\n        where id = #{id}\r\n    </select>\r\n\r\n    <!--查询指定行数据-->\r\n    <select id=\"queryAllByLimit\" resultMap=\"SubjectCategoryMap\">\r\n        select\r\n        id,\r\n        category_name,\r\n        category_type,\r\n        image_url,\r\n        parent_id,\r\n        created_by,\r\n        created_time,\r\n        update_by,\r\n        update_time,\r\n        is_deleted\r\n        from subject_category\r\n        <where>\r\n            <if test=\"id != null\">\r\n                and id = #{id}\r\n            </if>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                and category_name = #{categoryName}\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                and category_type = #{categoryType}\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                and image_url = #{imageUrl}\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                and parent_id = #{parentId}\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                and created_by = #{createdBy}\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                and created_time = #{createdTime}\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                and update_by = #{updateBy}\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                and update_time = #{updateTime}\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                and is_deleted = #{isDeleted}\r\n            </if>\r\n        </where>\r\n        limit #{pageable.offset}, #{pageable.pageSize}\r\n    </select>\r\n\r\n    <!--统计总行数-->\r\n    <select id=\"count\" resultType=\"java.lang.Long\">\r\n        select count(1)\r\n        from subject_category\r\n        <where>\r\n            <if test=\"id != null\">\r\n                and id = #{id}\r\n            </if>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                and category_name = #{categoryName}\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                and category_type = #{categoryType}\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                and image_url = #{imageUrl}\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                and parent_id = #{parentId}\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                and created_by = #{createdBy}\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                and created_time = #{createdTime}\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                and update_by = #{updateBy}\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                and update_time = #{updateTime}\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                and is_deleted = #{isDeleted}\r\n            </if>\r\n        </where>\r\n    </select>\r\n    <select id=\"queryCategory\" resultMap=\"SubjectCategoryMap\">\r\n        select *\r\n        from subject_category\r\n        <where>\r\n            <if test=\"id != null\">\r\n                and id = #{id}\r\n            </if>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                and category_name = #{categoryName}\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                and category_type = #{categoryType}\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                and image_url = #{imageUrl}\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                and parent_id = #{parentId}\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                and created_by = #{createdBy}\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                and created_time = #{createdTime}\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                and update_by = #{updateBy}\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                and update_time = #{updateTime}\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                and is_deleted = #{isDeleted}\r\n            </if>\r\n        </where>\r\n    </select>\r\n\r\n\r\n    <!--新增所有列-->\r\n    <insert id=\"insert\" keyProperty=\"id\" useGeneratedKeys=\"true\">\r\n        insert into subject_category(category_name, category_type, image_url, parent_id, created_by, created_time,\r\n                                     update_by, update_time, is_deleted)\r\n        values (#{categoryName}, #{categoryType}, #{imageUrl}, #{parentId}, #{createdBy}, #{createdTime}, #{updateBy},\r\n                #{updateTime}, #{isDeleted})\r\n    </insert>\r\n\r\n    <!--插入批量-->\r\n    <insert id=\"insertBatch\" keyProperty=\"id\" useGeneratedKeys=\"true\">\r\n        insert into\r\n        subject_category(category_name,category_type,image_url,parent_id,created_by,created_time,update_by,update_time,is_deleted)\r\n        values\r\n        <foreach collection=\"entities\" item=\"entity\" separator=\",\">\r\n            (#{entity.categoryName},#{entity.categoryType},#{entity.imageUrl},#{entity.parentId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})\r\n        </foreach>\r\n    </insert>\r\n\r\n    <!--新增批量-->\r\n    <insert id=\"insertOrUpdateBatch\" keyProperty=\"id\" useGeneratedKeys=\"true\">\r\n        insert into\r\n        subject_category(category_name,category_type,image_url,parent_id,created_by,created_time,update_by,update_time,is_deleted)\r\n        values\r\n        <foreach collection=\"entities\" item=\"entity\" separator=\",\">\r\n            (#{entity.categoryName},#{entity.categoryType},#{entity.imageUrl},#{entity.parentId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})\r\n        </foreach>\r\n        on duplicate key update\r\n        category_name = values(category_name),\r\n        category_type = values(category_type),\r\n        image_url = values(image_url),\r\n        parent_id= values(parent_id),\r\n        created_by = values(created_by),\r\n        created_time = values(created_time),\r\n        update_by = values(update_by),\r\n        update_time = values(update_time),\r\n        is_deleted = values(is_deleted)\r\n    </insert>\r\n\r\n    <!--通过主键修改数据-->\r\n    <update id=\"update\">\r\n        update subject_category\r\n        <set>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                category_name = #{categoryName},\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                category_type = #{categoryType},\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                image_url = #{imageUrl},\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                parent_id = #{parentId},\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                created_by = #{createdBy},\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                created_time = #{createdTime},\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                update_by = #{updateBy},\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                update_time = #{updateTime},\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                is_deleted = #{isDeleted},\r\n            </if>\r\n        </set>\r\n        where id = #{id}\r\n    </update>\r\n\r\n    <!--通过主键删除-->\r\n    <delete id=\"deleteById\">\r\n        delete\r\n        from subject_category\r\n        where id = #{id}\r\n    </delete>\r\n\r\n</mapper>\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/target/classes/mapper/SubjectCategoryDao.xml b/club-subject/club-infra/target/classes/mapper/SubjectCategoryDao.xml
--- a/club-subject/club-infra/target/classes/mapper/SubjectCategoryDao.xml	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-infra/target/classes/mapper/SubjectCategoryDao.xml	(date 1729744904467)
@@ -235,5 +235,11 @@
         where id = #{id}
     </delete>
 
+    <delete id="delete">
+        UPDATE subject_category
+        set is_deleted = 1
+        where id = #{id}
+    </delete>
+
 </mapper>
 
Index: club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectCategoryController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.application.controller;\r\n\r\nimport com.alibaba.fastjson.JSON;\r\nimport com.baomidou.mybatisplus.core.toolkit.StringUtils;\r\nimport com.baomidou.mybatisplus.extension.api.R;\r\nimport com.google.common.base.Preconditions;\r\nimport edu.cugb.subject.application.convert.SubjectCategoryDTOConverter;\r\nimport edu.cugb.subject.application.dto.SubjectCategoryDTO;\r\nimport edu.cugb.subject.common.entity.Result;\r\nimport edu.cugb.subject.domain.entity.SubjectCategoryBO;\r\nimport edu.cugb.subject.domain.service.SubjectCategoryDomainService;\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport javax.annotation.Resource;\r\nimport java.util.List;\r\n\r\n/**\r\n * @Author pengjia\r\n * @Data 2024/10/17 15:47\r\n * @Description: 刷题分类Controller\r\n */\r\n@RestController\r\n@RequestMapping(\"/subject/category\")\r\n@Slf4j\r\npublic class SubjectCategoryController {\r\n    @Resource\r\n    private SubjectCategoryDomainService subjectCategoryDomainService;\r\n\r\n    @PostMapping(\"/add\")\r\n    public Result<Boolean> add(@RequestBody SubjectCategoryDTO subjectCategoryDTO) {\r\n        try {\r\n            if (log.isInfoEnabled()) {\r\n                log.info(\"SubjectCategoryController.add.dto:{}\", JSON.toJSONString(subjectCategoryDTO));\r\n            }\r\n            //校验\r\n            Preconditions.checkNotNull(subjectCategoryDTO.getCategoryType(), \"分类类型不能为空\");\r\n            Preconditions.checkArgument(!StringUtils.isBlank(subjectCategoryDTO.getCategoryName()), \"分类名称不能为空\");\r\n            Preconditions.checkNotNull(subjectCategoryDTO.getParentId(), \"分类父级id不能为空\");\r\n            SubjectCategoryBO subjectCategoryBO = SubjectCategoryDTOConverter.INSTANCE.convertBOToCategory(subjectCategoryDTO);\r\n            subjectCategoryDomainService.add(subjectCategoryBO);\r\n            return Result.ok(true);\r\n        } catch (Exception e) {\r\n            log.error(\"SubjectCategoryController.add.error:{}\", e.getMessage(), e);\r\n            return Result.fail(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PostMapping(\"/queryPrimaryCategory\")\r\n    public Result<List<SubjectCategoryDTO>> queryPrimaryCategory() {\r\n        try {\r\n            SubjectCategoryBO subjectCategoryBO = new SubjectCategoryBO();\r\n            List<SubjectCategoryBO> subjectCategoryBOList = subjectCategoryDomainService.queryCategory(subjectCategoryBO);\r\n            List<SubjectCategoryDTO> subjectCategoryDTOList = SubjectCategoryDTOConverter.INSTANCE\r\n                    .convertBOToDTOList(subjectCategoryBOList);\r\n            return Result.ok(subjectCategoryDTOList);\r\n        } catch (Exception e) {\r\n            log.error(\"SubjectCategoryController.queryPrimaryCategory.error:{}\", e.getMessage(), e);\r\n            return Result.fail(\"查询失败\");\r\n        }\r\n\r\n    }\r\n\r\n    @PostMapping(\"/queryCategoryByPrimary\")\r\n    public Result<List<SubjectCategoryDTO>> queryPrimaryCategory(@RequestBody SubjectCategoryDTO subjectCategoryDTO) {\r\n        try {\r\n            if (log.isInfoEnabled()) {\r\n                log.info(\"SubjectCategoryController.queryCategoryByPrimary.dto:{}\", JSON.toJSONString(subjectCategoryDTO));\r\n            }\r\n            Preconditions.checkNotNull(subjectCategoryDTO.getParentId(), \"分类Id不能为空\");\r\n            SubjectCategoryBO subjectCategoryBO = SubjectCategoryDTOConverter.INSTANCE\r\n                    .convertDTOToBO(subjectCategoryDTO);\r\n            List<SubjectCategoryBO> subjectCategoryBOList = subjectCategoryDomainService.queryCategory(subjectCategoryBO);\r\n            List<SubjectCategoryDTO> subjectCategoryDTOList = SubjectCategoryDTOConverter.INSTANCE\r\n                    .convertBOToDTOList(subjectCategoryBOList);\r\n            return Result.ok(subjectCategoryDTOList);\r\n        } catch (Exception e) {\r\n            log.error(\"SubjectCategoryController.queryPrimaryCategory.error:{}\", e.getMessage(), e);\r\n            return Result.fail(\"查询失败\");\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectCategoryController.java b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectCategoryController.java
--- a/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectCategoryController.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectCategoryController.java	(date 1729748980364)
@@ -30,6 +30,12 @@
     @Resource
     private SubjectCategoryDomainService subjectCategoryDomainService;
 
+
+    /**
+     * 新增分类
+     * @param subjectCategoryDTO
+     * @return
+     */
     @PostMapping("/add")
     public Result<Boolean> add(@RequestBody SubjectCategoryDTO subjectCategoryDTO) {
         try {
@@ -45,14 +51,19 @@
             return Result.ok(true);
         } catch (Exception e) {
             log.error("SubjectCategoryController.add.error:{}", e.getMessage(), e);
-            return Result.fail(e.getMessage());
+            return Result.fail("新增分类失败");
         }
     }
 
+    /**
+     * 查询大类
+     *
+     * @return
+     */
     @PostMapping("/queryPrimaryCategory")
-    public Result<List<SubjectCategoryDTO>> queryPrimaryCategory() {
+    public Result<List<SubjectCategoryDTO>> queryPrimaryCategory(@RequestBody SubjectCategoryDTO subjectCategoryDTO ) {
         try {
-            SubjectCategoryBO subjectCategoryBO = new SubjectCategoryBO();
+            SubjectCategoryBO subjectCategoryBO = SubjectCategoryDTOConverter.INSTANCE.convertDTOToBO(subjectCategoryDTO);
             List<SubjectCategoryBO> subjectCategoryBOList = subjectCategoryDomainService.queryCategory(subjectCategoryBO);
             List<SubjectCategoryDTO> subjectCategoryDTOList = SubjectCategoryDTOConverter.INSTANCE
                     .convertBOToDTOList(subjectCategoryBOList);
@@ -64,8 +75,14 @@
 
     }
 
+    /**
+     * 查询大类下分类
+     *
+     * @param subjectCategoryDTO
+     * @return
+     */
     @PostMapping("/queryCategoryByPrimary")
-    public Result<List<SubjectCategoryDTO>> queryPrimaryCategory(@RequestBody SubjectCategoryDTO subjectCategoryDTO) {
+    public Result<List<SubjectCategoryDTO>> queryCategoryByPrimary(@RequestBody SubjectCategoryDTO subjectCategoryDTO) {
         try {
             if (log.isInfoEnabled()) {
                 log.info("SubjectCategoryController.queryCategoryByPrimary.dto:{}", JSON.toJSONString(subjectCategoryDTO));
@@ -84,5 +101,49 @@
 
     }
 
+    /**
+     * 更新分类
+     * @param subjectCategoryDTO
+     * @return
+     */
+    @PostMapping("/update")
+    public Result<Boolean> update(@RequestBody SubjectCategoryDTO subjectCategoryDTO) {
+        try {
+            if (log.isInfoEnabled()) {
+                log.info("SubjectCategoryController.update.dto:{}", JSON.toJSONString(subjectCategoryDTO));
+            }
+
+            SubjectCategoryBO subjectCategoryBO = SubjectCategoryDTOConverter.INSTANCE.convertDTOToBO(subjectCategoryDTO);
+            Boolean result = subjectCategoryDomainService.update(subjectCategoryBO);
+            return Result.ok(result);
+
+        } catch (Exception e) {
+            log.error("SubjectCategoryController.update.error:{}", e.getMessage(), e);
+            return Result.fail("更新分类失败");
+        }
+    }
+
+    /**
+     * 删除分类
+     * @param subjectCategoryDTO
+     * @return
+     */
+    @PostMapping("/delete")
+    public Result<Boolean> delete(@RequestBody SubjectCategoryDTO subjectCategoryDTO) {
+        try {
+            if (log.isInfoEnabled()) {
+                log.info("SubjectCategoryController.delete.dto:{}", JSON.toJSONString(subjectCategoryDTO));
+            }
+
+            SubjectCategoryBO subjectCategoryBO = SubjectCategoryDTOConverter.INSTANCE.convertDTOToBO(subjectCategoryDTO);
+            Boolean result = subjectCategoryDomainService.delete(subjectCategoryBO);
+            return Result.ok(result);
+
+        } catch (Exception e) {
+            log.error("SubjectCategoryController.update.error:{}", e.getMessage(), e);
+            return Result.fail("删除分类失败");
+        }
+    }
+
 
 }
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectMappingServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectMappingServiceImpl.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectMappingServiceImpl.java
new file mode 100644
--- /dev/null	(date 1729777111791)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectMappingServiceImpl.java	(date 1729777111791)
@@ -0,0 +1,80 @@
+package edu.cugb.subject.infra.basic.service.impl;
+
+import edu.cugb.subject.infra.basic.entity.SubjectMapping;
+import edu.cugb.subject.infra.basic.mapper.SubjectMappingDao;
+import edu.cugb.subject.infra.basic.service.SubjectMappingService;
+import org.springframework.stereotype.Service;
+
+
+import javax.annotation.Resource;
+import java.util.List;
+
+/**
+ * 题目分类关系表(SubjectMapping)表服务实现类
+ *
+ * @author makejava
+ * @since 2024-10-24 20:07:44
+ */
+@Service("subjectMappingService")
+public class SubjectMappingServiceImpl implements SubjectMappingService {
+    @Resource
+    private SubjectMappingDao subjectMappingDao;
+
+    /**
+     * 通过ID查询单条数据
+     *
+     * @param id 主键
+     * @return 实例对象
+     */
+    @Override
+    public SubjectMapping queryById(Long id) {
+        return this.subjectMappingDao.queryById(id);
+    }
+
+
+    /**
+     * 新增数据
+     *
+     * @param subjectMapping 实例对象
+     * @return 实例对象
+     */
+    @Override
+    public SubjectMapping insert(SubjectMapping subjectMapping) {
+        this.subjectMappingDao.insert(subjectMapping);
+        return subjectMapping;
+    }
+
+    /**
+     * 修改数据
+     *
+     * @param subjectMapping 实例对象
+     * @return 实例对象
+     */
+    @Override
+    public int update(SubjectMapping subjectMapping) {
+
+        return this.subjectMappingDao.update(subjectMapping);
+    }
+
+    /**
+     * 通过主键删除数据
+     *
+     * @param id 主键
+     * @return 是否成功
+     */
+    @Override
+    public boolean deleteById(Long id) {
+        return this.subjectMappingDao.deleteById(id) > 0;
+    }
+
+    /**
+     * 查询标签id
+     *
+     * @param subjectMapping
+     * @return
+     */
+    @Override
+    public List<SubjectMapping> queryLabelId(SubjectMapping subjectMapping) {
+        return this.subjectMappingDao.queryDistinctLabelId(subjectMapping);
+    }
+}
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectMappingService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectMappingService.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectMappingService.java
new file mode 100644
--- /dev/null	(date 1729776890708)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectMappingService.java	(date 1729776890708)
@@ -0,0 +1,55 @@
+package edu.cugb.subject.infra.basic.service;
+
+import edu.cugb.subject.infra.basic.entity.SubjectMapping;
+
+import java.util.List;
+
+
+/**
+ * 题目分类关系表(SubjectMapping)表服务接口
+ *
+ * @author makejava
+ * @since 2024-10-24 20:07:44
+ */
+public interface SubjectMappingService {
+
+    /**
+     * 通过ID查询单条数据
+     *
+     * @param id 主键
+     * @return 实例对象
+     */
+    SubjectMapping queryById(Long id);
+
+
+    /**
+     * 新增数据
+     *
+     * @param subjectMapping 实例对象
+     * @return 实例对象
+     */
+    SubjectMapping insert(SubjectMapping subjectMapping);
+
+    /**
+     * 修改数据
+     *
+     * @param subjectMapping 实例对象
+     * @return 实例对象
+     */
+    int update(SubjectMapping subjectMapping);
+
+    /**
+     * 通过主键删除数据
+     *
+     * @param id 主键
+     * @return 是否成功
+     */
+    boolean deleteById(Long id);
+
+    /**
+     *  查询标签id
+     * @param subjectMapping
+     * @return
+     */
+    List<SubjectMapping> queryLabelId(SubjectMapping subjectMapping);
+}
Index: club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/IsDeletedFlagEnum.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/IsDeletedFlagEnum.java b/club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/IsDeletedFlagEnum.java
new file mode 100644
--- /dev/null	(date 1729744904581)
+++ b/club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/IsDeletedFlagEnum.java	(date 1729744904581)
@@ -0,0 +1,25 @@
+package edu.cugb.subject.common.enums;
+
+import lombok.Getter;
+
+/**
+ * @Author pengjia
+ * @Data 2024/10/23 17:20
+ * @Description: 删除状态枚举
+ */
+@Getter
+public enum IsDeletedFlagEnum {
+
+    DELETED(1,"已删除"),
+    Un_DELETED(0,"未删除");
+
+    public int code;
+
+    public String desc;
+
+
+    IsDeletedFlagEnum(int code, String desc) {
+        this.code = code;
+        this.desc = desc;
+    }
+}
Index: club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/CategoryTypeEnum.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/CategoryTypeEnum.java b/club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/CategoryTypeEnum.java
new file mode 100644
--- /dev/null	(date 1729744904477)
+++ b/club-subject/club-common/src/main/java/edu/cugb/subject/common/enums/CategoryTypeEnum.java	(date 1729744904477)
@@ -0,0 +1,25 @@
+package edu.cugb.subject.common.enums;
+
+import lombok.Getter;
+
+/**
+ * @Author pengjia
+ * @Data 2024/10/23 17:20
+ * @Description: 分类类型枚举
+ */
+@Getter
+public enum CategoryTypeEnum {
+
+    PRIMARY(1,"岗位大类"),
+    SECOND(2,"二级分类");
+
+    public int code;
+
+    public String desc;
+
+
+    CategoryTypeEnum(int code, String desc) {
+        this.code = code;
+        this.desc = desc;
+    }
+}
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectLabelDao.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectLabelDao.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectLabelDao.java
new file mode 100644
--- /dev/null	(date 1729841085252)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectLabelDao.java	(date 1729841085252)
@@ -0,0 +1,82 @@
+package edu.cugb.subject.infra.basic.mapper;
+
+import edu.cugb.subject.infra.basic.entity.SubjectLabel;
+import org.apache.ibatis.annotations.Param;
+import java.util.List;
+
+/**
+ * 题目标签表(SubjectLabel)表数据库访问层
+ *
+ * @author makejava
+ * @since 2024-10-24 12:52:40
+ */
+public interface SubjectLabelDao {
+
+    /**
+     * 通过ID查询单条数据
+     *
+     * @param id 主键
+     * @return 实例对象
+     */
+    SubjectLabel queryById(Long id);
+
+    /**
+     * 查询指定行数据
+     *
+     * @param subjectLabel 查询条件
+     * @return 对象列表
+     */
+    List<SubjectLabel> queryAllByLimit(SubjectLabel subjectLabel);
+
+    /**
+     * 统计总行数
+     *
+     * @param subjectLabel 查询条件
+     * @return 总行数
+     */
+    long count(SubjectLabel subjectLabel);
+
+    /**
+     * 新增数据
+     *
+     * @param subjectLabel 实例对象
+     * @return 影响行数
+     */
+    int insert(SubjectLabel subjectLabel);
+
+    /**
+     * 批量新增数据（MyBatis原生foreach方法）
+     *
+     * @param entities List<SubjectLabel> 实例对象列表
+     * @return 影响行数
+     */
+    int insertBatch(@Param("entities") List<SubjectLabel> entities);
+
+    /**
+     * 批量新增或按主键更新数据（MyBatis原生foreach方法）
+     *
+     * @param entities List<SubjectLabel> 实例对象列表
+     * @return 影响行数
+     * @throws org.springframework.jdbc.BadSqlGrammarException 入参是空List的时候会抛SQL语句错误的异常，请自行校验入参
+     */
+    int insertOrUpdateBatch(@Param("entities") List<SubjectLabel> entities);
+
+    /**
+     * 修改数据
+     *
+     * @param subjectLabel 实例对象
+     * @return 影响行数
+     */
+    int update(SubjectLabel subjectLabel);
+
+    /**
+     * 通过主键删除数据
+     *
+     * @param id 主键
+     * @return 影响行数
+     */
+    int deleteById(Long id);
+
+    List<SubjectLabel> batchQueryById(@Param("list") List<Long> labelIdList);
+}
+
Index: club-subject/club-infra/src/main/resources/mapper/SubjectLabelDao.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/resources/mapper/SubjectLabelDao.xml b/club-subject/club-infra/src/main/resources/mapper/SubjectLabelDao.xml
new file mode 100644
--- /dev/null	(date 1729841220140)
+++ b/club-subject/club-infra/src/main/resources/mapper/SubjectLabelDao.xml	(date 1729841220140)
@@ -0,0 +1,205 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
+<mapper namespace="edu.cugb.subject.infra.basic.mapper.SubjectLabelDao">
+
+    <resultMap type="edu.cugb.subject.infra.basic.entity.SubjectLabel" id="SubjectLabelMap">
+        <result property="id" column="id" jdbcType="INTEGER"/>
+        <result property="labelName" column="label_name" jdbcType="VARCHAR"/>
+        <result property="sortNum" column="sort_num" jdbcType="INTEGER"/>
+        <result property="categoryId" column="category_id" jdbcType="VARCHAR"/>
+        <result property="createdBy" column="created_by" jdbcType="VARCHAR"/>
+        <result property="createdTime" column="created_time" jdbcType="TIMESTAMP"/>
+        <result property="updateBy" column="update_by" jdbcType="VARCHAR"/>
+        <result property="updateTime" column="update_time" jdbcType="TIMESTAMP"/>
+        <result property="isDeleted" column="is_deleted" jdbcType="INTEGER"/>
+    </resultMap>
+
+    <!--查询单个-->
+    <select id="queryById" resultMap="SubjectLabelMap">
+        select id,
+               label_name,
+               sort_num,
+               category_id,
+               created_by,
+               created_time,
+               update_by,
+               update_time,
+               is_deleted
+        from subject_label
+        where id = #{id}
+    </select>
+
+    <!--查询指定行数据-->
+    <select id="queryAllByLimit" resultMap="SubjectLabelMap">
+        select
+        id,
+        label_name,
+        sort_num,
+        category_id,
+        created_by,
+        created_time,
+        update_by,
+        update_time,
+        is_deleted
+        from subject_label
+        <where>
+            <if test="id != null">
+                and id = #{id}
+            </if>
+            <if test="labelName != null and labelName != ''">
+                and label_name = #{labelName}
+            </if>
+            <if test="sortNum != null">
+                and sort_num = #{sortNum}
+            </if>
+            <if test="categoryId != null and categoryId != ''">
+                and category_id = #{categoryId}
+            </if>
+            <if test="createdBy != null and createdBy != ''">
+                and created_by = #{createdBy}
+            </if>
+            <if test="createdTime != null">
+                and created_time = #{createdTime}
+            </if>
+            <if test="updateBy != null and updateBy != ''">
+                and update_by = #{updateBy}
+            </if>
+            <if test="updateTime != null">
+                and update_time = #{updateTime}
+            </if>
+            <if test="isDeleted != null">
+                and is_deleted = #{isDeleted}
+            </if>
+        </where>
+        limit #{pageable.offset}, #{pageable.pageSize}
+    </select>
+
+    <!--统计总行数-->
+    <select id="count" resultType="java.lang.Long">
+        select count(1)
+        from subject_label
+        <where>
+            <if test="id != null">
+                and id = #{id}
+            </if>
+            <if test="labelName != null and labelName != ''">
+                and label_name = #{labelName}
+            </if>
+            <if test="sortNum != null">
+                and sort_num = #{sortNum}
+            </if>
+            <if test="categoryId != null and categoryId != ''">
+                and category_id = #{categoryId}
+            </if>
+            <if test="createdBy != null and createdBy != ''">
+                and created_by = #{createdBy}
+            </if>
+            <if test="createdTime != null">
+                and created_time = #{createdTime}
+            </if>
+            <if test="updateBy != null and updateBy != ''">
+                and update_by = #{updateBy}
+            </if>
+            <if test="updateTime != null">
+                and update_time = #{updateTime}
+            </if>
+            <if test="isDeleted != null">
+                and is_deleted = #{isDeleted}
+            </if>
+        </where>
+    </select>
+
+    <!--根据标签idList批量查询标签-->
+    <select id="batchQueryById" resultMap="SubjectLabelMap">
+        select id,
+        label_name,
+        sort_num,
+        category_id,
+        created_by,
+        created_time,
+        update_by,
+        update_time,
+        is_deleted
+        from subject_label
+        where id in
+        <foreach open="(" close=")" collection="list" item="id" separator=",">
+            #{id}
+        </foreach>
+    </select>
+
+    <!--新增所有列-->
+    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
+        insert into subject_label(label_name, sort_num, category_id, created_by, created_time, update_by, update_time,
+                                  is_deleted)
+        values (#{labelName}, #{sortNum}, #{categoryId}, #{createdBy}, #{createdTime}, #{updateBy}, #{updateTime},
+                #{isDeleted})
+    </insert>
+
+    <insert id="insertBatch" keyProperty="id" useGeneratedKeys="true">
+        insert into
+        subject_label(label_name,sort_num,category_id,created_by,created_time,update_by,update_time,is_deleted)
+        values
+        <foreach collection="entities" item="entity" separator=",">
+            (#{entity.labelName},#{entity.sortNum},#{entity.categoryId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})
+        </foreach>
+    </insert>
+
+    <insert id="insertOrUpdateBatch" keyProperty="id" useGeneratedKeys="true">
+        insert into
+        subject_label(label_name,sort_num,category_id,created_by,created_time,update_by,update_time,is_deleted)
+        values
+        <foreach collection="entities" item="entity" separator=",">
+            (#{entity.labelName},#{entity.sortNum},#{entity.categoryId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})
+        </foreach>
+        on duplicate key update
+        label_name = values(label_name),
+        sort_num = values(sort_num),
+        category_id = values(category_id),
+        created_by = values(created_by),
+        created_time = values(created_time),
+        update_by = values(update_by),
+        update_time = values(update_time),
+        is_deleted = values(is_deleted)
+    </insert>
+
+    <!--通过主键修改数据-->
+    <update id="update">
+        update subject_label
+        <set>
+            <if test="labelName != null and labelName != ''">
+                label_name = #{labelName},
+            </if>
+            <if test="sortNum != null">
+                sort_num = #{sortNum},
+            </if>
+            <if test="categoryId != null and categoryId != ''">
+                category_id = #{categoryId},
+            </if>
+            <if test="createdBy != null and createdBy != ''">
+                created_by = #{createdBy},
+            </if>
+            <if test="createdTime != null">
+                created_time = #{createdTime},
+            </if>
+            <if test="updateBy != null and updateBy != ''">
+                update_by = #{updateBy},
+            </if>
+            <if test="updateTime != null">
+                update_time = #{updateTime},
+            </if>
+            <if test="isDeleted != null">
+                is_deleted = #{isDeleted},
+            </if>
+        </set>
+        where id = #{id}
+    </update>
+
+    <!--通过主键删除-->
+    <delete id="deleteById">
+        delete
+        from subject_label
+        where id = #{id}
+    </delete>
+
+</mapper>
+
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectLabel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectLabel.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectLabel.java
new file mode 100644
--- /dev/null	(date 1729745582158)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/entity/SubjectLabel.java	(date 1729745582158)
@@ -0,0 +1,121 @@
+package edu.cugb.subject.infra.basic.entity;
+
+import java.util.Date;
+import java.io.Serializable;
+
+/**
+ * 题目标签表(SubjectLabel)实体类
+ *
+ * @author makejava
+ * @since 2024-10-24 12:52:42
+ */
+public class SubjectLabel implements Serializable {
+    private static final long serialVersionUID = 147840583441771786L;
+/**
+     * 主键
+     */
+    private Long id;
+/**
+     * 标签分类
+     */
+    private String labelName;
+/**
+     * 排序
+     */
+    private Integer sortNum;
+
+    private String categoryId;
+/**
+     * 创建人
+     */
+    private String createdBy;
+/**
+     * 创建时间
+     */
+    private Date createdTime;
+/**
+     * 更新人
+     */
+    private String updateBy;
+/**
+     * 更新时间
+     */
+    private Date updateTime;
+
+    private Integer isDeleted;
+
+
+    public Long getId() {
+        return id;
+    }
+
+    public void setId(Long id) {
+        this.id = id;
+    }
+
+    public String getLabelName() {
+        return labelName;
+    }
+
+    public void setLabelName(String labelName) {
+        this.labelName = labelName;
+    }
+
+    public Integer getSortNum() {
+        return sortNum;
+    }
+
+    public void setSortNum(Integer sortNum) {
+        this.sortNum = sortNum;
+    }
+
+    public String getCategoryId() {
+        return categoryId;
+    }
+
+    public void setCategoryId(String categoryId) {
+        this.categoryId = categoryId;
+    }
+
+    public String getCreatedBy() {
+        return createdBy;
+    }
+
+    public void setCreatedBy(String createdBy) {
+        this.createdBy = createdBy;
+    }
+
+    public Date getCreatedTime() {
+        return createdTime;
+    }
+
+    public void setCreatedTime(Date createdTime) {
+        this.createdTime = createdTime;
+    }
+
+    public String getUpdateBy() {
+        return updateBy;
+    }
+
+    public void setUpdateBy(String updateBy) {
+        this.updateBy = updateBy;
+    }
+
+    public Date getUpdateTime() {
+        return updateTime;
+    }
+
+    public void setUpdateTime(Date updateTime) {
+        this.updateTime = updateTime;
+    }
+
+    public Integer getIsDeleted() {
+        return isDeleted;
+    }
+
+    public void setIsDeleted(Integer isDeleted) {
+        this.isDeleted = isDeleted;
+    }
+
+}
+
Index: club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectLabelController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectLabelController.java b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectLabelController.java
new file mode 100644
--- /dev/null	(date 1729776323978)
+++ b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectLabelController.java	(date 1729776323978)
@@ -0,0 +1,127 @@
+package edu.cugb.subject.application.controller;
+
+import com.alibaba.fastjson.JSON;
+import com.baomidou.mybatisplus.core.toolkit.StringUtils;
+import com.google.common.base.Preconditions;
+import edu.cugb.subject.application.convert.SubjectCategoryDTOConverter;
+import edu.cugb.subject.application.convert.SubjectLabelDTOConverter;
+import edu.cugb.subject.application.dto.SubjectCategoryDTO;
+import edu.cugb.subject.application.dto.SubjectLabelDTO;
+import edu.cugb.subject.common.entity.Result;
+import edu.cugb.subject.domain.entity.SubjectCategoryBO;
+import edu.cugb.subject.domain.entity.SubjectLabelBO;
+import edu.cugb.subject.domain.service.SubjectLabelDomainService;
+import lombok.extern.slf4j.Slf4j;
+import org.springframework.web.bind.annotation.PostMapping;
+import org.springframework.web.bind.annotation.RequestBody;
+import org.springframework.web.bind.annotation.RequestMapping;
+import org.springframework.web.bind.annotation.RestController;
+
+import javax.annotation.Resource;
+import java.util.List;
+
+/**
+ * @Author pengjia
+ * @Data 2024/10/24 13:18
+ * @Description: 标签模块
+ */
+@RestController
+@RequestMapping("/subject/label")
+@Slf4j
+public class SubjectLabelController {
+
+    @Resource
+    private SubjectLabelDomainService subjectLabelDomainService;
+
+    /**
+     * 新增标签
+     * @param subjectLabelDTO
+     * @return
+     */
+    @PostMapping("/add")
+    public Result<Boolean> add(@RequestBody SubjectLabelDTO subjectLabelDTO) {
+        try {
+            if (log.isInfoEnabled()) {
+                log.info("SubjectLabelController.add.dto:{}", JSON.toJSONString(subjectLabelDTO));
+            }
+            //校验
+            Preconditions.checkArgument(!StringUtils.isBlank(subjectLabelDTO.getLabelName()), "标签名称不能为空");
+            SubjectLabelBO subjectLabelBO = SubjectLabelDTOConverter.INSTANCE.convertDTOToBO(subjectLabelDTO);
+            Boolean result = subjectLabelDomainService.add(subjectLabelBO);
+            return Result.ok(result);
+        } catch (Exception e) {
+            log.error("SubjectLabelController.add.error:{}", e.getMessage(), e);
+            return Result.fail("新增标签失败");
+        }
+    }
+
+    /**
+     * 更新标签
+     * @param subjectLabelDTO
+     * @return
+     */
+    @PostMapping("/update")
+    public Result<Boolean> update(@RequestBody SubjectLabelDTO subjectLabelDTO) {
+        try {
+            if (log.isInfoEnabled()) {
+                log.info("SubjectLabelController.update.dto:{}", JSON.toJSONString(subjectLabelDTO));
+            }
+            Preconditions.checkNotNull(subjectLabelDTO.getId(),"标签id不能为空");
+            SubjectLabelBO subjectLabelBO = SubjectLabelDTOConverter.INSTANCE.convertDTOToBO(subjectLabelDTO);
+            Boolean result = subjectLabelDomainService.update(subjectLabelBO);
+            return Result.ok(result);
+
+        } catch (Exception e) {
+            log.error("SubjectLabelController.update.error:{}", e.getMessage(), e);
+            return Result.fail("更新标签失败");
+        }
+    }
+
+    /**
+     * 删除标签
+     * @param subjectLabelDTO
+     * @return
+     */
+    @PostMapping("/delete")
+    public Result<Boolean> delete(@RequestBody SubjectLabelDTO subjectLabelDTO) {
+        try {
+            if (log.isInfoEnabled()) {
+                log.info("SubjectLabelController.delete.dto:{}", JSON.toJSONString(subjectLabelDTO));
+            }
+            Preconditions.checkNotNull(subjectLabelDTO.getId(),"标签id不能为空");
+            SubjectLabelBO subjectLabelBO = SubjectLabelDTOConverter.INSTANCE.convertDTOToBO(subjectLabelDTO);
+            Boolean result = subjectLabelDomainService.delete(subjectLabelBO);
+            return Result.ok(result);
+
+        } catch (Exception e) {
+            log.error("SubjectLabelController.update.error:{}", e.getMessage(), e);
+            return Result.fail("删除标签失败");
+        }
+    }
+
+    /**
+     * 查询分类下标签
+     * @param subjectLabelDTO
+     * @return
+     */
+    @PostMapping("/queryByCategoryId")
+    public Result<List<SubjectLabelDTO>> queryByCategoryId(@RequestBody SubjectLabelDTO subjectLabelDTO) {
+        try {
+            if (log.
+                    isInfoEnabled()) {
+                log.info("SubjectLabelController.queryByCategoryId.dto:{}",
+                        JSON.toJSONString(subjectLabelDTO));
+            }
+            Preconditions.checkNotNull(subjectLabelDTO.getCategoryId(),"分类id不能为空");
+            SubjectLabelBO subjectLabelBO = SubjectLabelDTOConverter.INSTANCE.convertDTOToBO(subjectLabelDTO);
+            List<SubjectLabelBO> boList = subjectLabelDomainService.queryByCategoryId(subjectLabelBO);
+            List<SubjectLabelDTO> subjectCategoryDTOList = SubjectLabelDTOConverter.INSTANCE.convertBOLIstToDTOList(boList);
+            return Result.ok(subjectCategoryDTOList);
+
+        } catch (Exception e) {
+            log.error("SubjectLabelController.queryByCategoryId.error:{}", e.getMessage(), e);
+            return Result.fail("查询分类下失败");
+        }
+    }
+
+}
Index: club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/dto/SubjectLabelDTO.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/dto/SubjectLabelDTO.java b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/dto/SubjectLabelDTO.java
new file mode 100644
--- /dev/null	(date 1729775821275)
+++ b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/dto/SubjectLabelDTO.java	(date 1729775821275)
@@ -0,0 +1,39 @@
+package edu.cugb.subject.application.dto;
+
+import lombok.Data;
+
+import java.io.Serializable;
+import java.util.Date;
+
+/**
+ * 题目标签dto
+ *
+ * @author makejava
+ * @since 2024-10-24 12:52:42
+ */
+@Data
+public class SubjectLabelDTO implements Serializable {
+    private static final long serialVersionUID = 147840583441771786L;
+    /**
+     * 主键
+     */
+    private Long id;
+    /**
+     * 分类id
+     */
+    private Long categoryId;
+    /**
+     * 标签分类
+     */
+    private String labelName;
+    /**
+     * 排序
+     */
+    private Integer sortNum;
+
+
+    private Integer isDeleted;
+
+
+}
+
Index: club-subject/club-application/club-application-controller/target/generated-sources/annotations/edu/cugb/subject/application/convert/SubjectCategoryDTOConverterImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.application.convert;\r\n\r\nimport edu.cugb.subject.application.dto.SubjectCategoryDTO;\r\nimport edu.cugb.subject.domain.entity.SubjectCategoryBO;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.annotation.Generated;\r\n\r\n@Generated(\r\n    value = \"org.mapstruct.ap.MappingProcessor\",\r\n    date = \"2024-10-23T16:07:24+0800\",\r\n    comments = \"version: 1.4.2.Final, compiler: javac, environment: Java 1.8.0_152 (Oracle Corporation)\"\r\n)\r\npublic class SubjectCategoryDTOConverterImpl implements SubjectCategoryDTOConverter {\r\n\r\n    @Override\r\n    public SubjectCategoryBO convertBOToCategory(SubjectCategoryDTO subjectCategoryDTO) {\r\n        if ( subjectCategoryDTO == null ) {\r\n            return null;\r\n        }\r\n\r\n        SubjectCategoryBO subjectCategoryBO = new SubjectCategoryBO();\r\n\r\n        subjectCategoryBO.setId( subjectCategoryDTO.getId() );\r\n        subjectCategoryBO.setCategoryName( subjectCategoryDTO.getCategoryName() );\r\n        subjectCategoryBO.setCategoryType( subjectCategoryDTO.getCategoryType() );\r\n        subjectCategoryBO.setImageUrl( subjectCategoryDTO.getImageUrl() );\r\n        subjectCategoryBO.setParentId( subjectCategoryDTO.getParentId() );\r\n        subjectCategoryBO.setIsDeleted( subjectCategoryDTO.getIsDeleted() );\r\n\r\n        return subjectCategoryBO;\r\n    }\r\n\r\n    @Override\r\n    public List<SubjectCategoryDTO> convertBOToDTOList(List<SubjectCategoryBO> subjectCategoryBO) {\r\n        if ( subjectCategoryBO == null ) {\r\n            return null;\r\n        }\r\n\r\n        List<SubjectCategoryDTO> list = new ArrayList<SubjectCategoryDTO>( subjectCategoryBO.size() );\r\n        for ( SubjectCategoryBO subjectCategoryBO1 : subjectCategoryBO ) {\r\n            list.add( subjectCategoryBOToSubjectCategoryDTO( subjectCategoryBO1 ) );\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n    @Override\r\n    public SubjectCategoryBO convertDTOToBO(SubjectCategoryDTO subjectCategoryDTO) {\r\n        if ( subjectCategoryDTO == null ) {\r\n            return null;\r\n        }\r\n\r\n        SubjectCategoryBO subjectCategoryBO = new SubjectCategoryBO();\r\n\r\n        subjectCategoryBO.setId( subjectCategoryDTO.getId() );\r\n        subjectCategoryBO.setCategoryName( subjectCategoryDTO.getCategoryName() );\r\n        subjectCategoryBO.setCategoryType( subjectCategoryDTO.getCategoryType() );\r\n        subjectCategoryBO.setImageUrl( subjectCategoryDTO.getImageUrl() );\r\n        subjectCategoryBO.setParentId( subjectCategoryDTO.getParentId() );\r\n        subjectCategoryBO.setIsDeleted( subjectCategoryDTO.getIsDeleted() );\r\n\r\n        return subjectCategoryBO;\r\n    }\r\n\r\n    protected SubjectCategoryDTO subjectCategoryBOToSubjectCategoryDTO(SubjectCategoryBO subjectCategoryBO) {\r\n        if ( subjectCategoryBO == null ) {\r\n            return null;\r\n        }\r\n\r\n        SubjectCategoryDTO subjectCategoryDTO = new SubjectCategoryDTO();\r\n\r\n        subjectCategoryDTO.setId( subjectCategoryBO.getId() );\r\n        subjectCategoryDTO.setCategoryName( subjectCategoryBO.getCategoryName() );\r\n        subjectCategoryDTO.setCategoryType( subjectCategoryBO.getCategoryType() );\r\n        subjectCategoryDTO.setImageUrl( subjectCategoryBO.getImageUrl() );\r\n        subjectCategoryDTO.setParentId( subjectCategoryBO.getParentId() );\r\n        subjectCategoryDTO.setIsDeleted( subjectCategoryBO.getIsDeleted() );\r\n\r\n        return subjectCategoryDTO;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-application/club-application-controller/target/generated-sources/annotations/edu/cugb/subject/application/convert/SubjectCategoryDTOConverterImpl.java b/club-subject/club-application/club-application-controller/target/generated-sources/annotations/edu/cugb/subject/application/convert/SubjectCategoryDTOConverterImpl.java
--- a/club-subject/club-application/club-application-controller/target/generated-sources/annotations/edu/cugb/subject/application/convert/SubjectCategoryDTOConverterImpl.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-application/club-application-controller/target/generated-sources/annotations/edu/cugb/subject/application/convert/SubjectCategoryDTOConverterImpl.java	(date 1729744904570)
@@ -8,7 +8,7 @@
 
 @Generated(
     value = "org.mapstruct.ap.MappingProcessor",
-    date = "2024-10-23T16:07:24+0800",
+    date = "2024-10-23T21:48:02+0800",
     comments = "version: 1.4.2.Final, compiler: javac, environment: Java 1.8.0_152 (Oracle Corporation)"
 )
 public class SubjectCategoryDTOConverterImpl implements SubjectCategoryDTOConverter {
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectLabelServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectLabelServiceImpl.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectLabelServiceImpl.java
new file mode 100644
--- /dev/null	(date 1729777783063)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectLabelServiceImpl.java	(date 1729777783063)
@@ -0,0 +1,73 @@
+package edu.cugb.subject.infra.basic.service.impl;
+
+import edu.cugb.subject.infra.basic.entity.SubjectLabel;
+import edu.cugb.subject.infra.basic.mapper.SubjectLabelDao;
+import edu.cugb.subject.infra.basic.service.SubjectLabelService;
+import org.springframework.stereotype.Service;
+
+
+import javax.annotation.Resource;
+import java.util.List;
+
+/**
+ * 题目标签表(SubjectLabel)表服务实现类
+ *
+ * @author makejava
+ * @since 2024-10-24 12:52:42
+ */
+@Service("subjectLabelService")
+public class SubjectLabelServiceImpl implements SubjectLabelService {
+    @Resource
+    private SubjectLabelDao subjectLabelDao;
+
+    /**
+     * 通过ID查询单条数据
+     *
+     * @param id 主键
+     * @return 实例对象
+     */
+    @Override
+    public SubjectLabel queryById(Long id) {
+        return this.subjectLabelDao.queryById(id);
+    }
+
+
+
+    /**
+     * 新增数据
+     *
+     * @param subjectLabel 实例对象
+     * @return 实例对象
+     */
+    @Override
+    public int insert(SubjectLabel subjectLabel) {
+        return this.subjectLabelDao.insert(subjectLabel);
+    }
+
+    /**
+     * 修改数据
+     *
+     * @param subjectLabel 实例对象
+     * @return 实例对象
+     */
+    @Override
+    public int update(SubjectLabel subjectLabel) {
+        return this.subjectLabelDao.update(subjectLabel);
+    }
+
+    /**
+     * 通过主键删除数据
+     *
+     * @param id 主键
+     * @return 是否成功
+     */
+    @Override
+    public boolean deleteById(Long id) {
+        return this.subjectLabelDao.deleteById(id) > 0;
+    }
+
+    @Override
+    public List<SubjectLabel> batchQueryById(List<Long> labelIdList) {
+        return this.subjectLabelDao.batchQueryById(labelIdList);
+    }
+}
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectLabelService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectLabelService.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectLabelService.java
new file mode 100644
--- /dev/null	(date 1729841198969)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectLabelService.java	(date 1729841198969)
@@ -0,0 +1,51 @@
+package edu.cugb.subject.infra.basic.service;
+
+import edu.cugb.subject.infra.basic.entity.SubjectLabel;
+
+import java.util.List;
+
+
+/**
+ * 题目标签表(SubjectLabel)表服务接口
+ *
+ * @author makejava
+ * @since 2024-10-24 12:52:42
+ */
+public interface SubjectLabelService {
+
+    /**
+     * 通过ID查询单条数据
+     *
+     * @param id 主键
+     * @return 实例对象
+     */
+    SubjectLabel queryById(Long id);
+
+
+
+    /**
+     * 新增数据
+     *
+     * @param subjectLabel 实例对象
+     * @return 实例对象
+     */
+    int insert(SubjectLabel subjectLabel);
+
+    /**
+     * 修改数据
+     *
+     * @param subjectLabel 实例对象
+     * @return 实例对象
+     */
+    int update(SubjectLabel subjectLabel);
+
+    /**
+     * 通过主键删除数据
+     *
+     * @param id 主键
+     * @return 是否成功
+     */
+    boolean deleteById(Long id);
+
+    List<SubjectLabel> batchQueryById(List<Long> labelIdList);
+}
Index: club-subject/club-domain/target/generated-sources/annotations/edu/cugb/subject/domain/convert/SubjectCategoryConverterImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.domain.convert;\r\n\r\nimport edu.cugb.subject.domain.entity.SubjectCategoryBO;\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.annotation.Generated;\r\n\r\n@Generated(\r\n    value = \"org.mapstruct.ap.MappingProcessor\",\r\n    date = \"2024-10-22T13:41:13+0800\",\r\n    comments = \"version: 1.4.2.Final, compiler: javac, environment: Java 1.8.0_152 (Oracle Corporation)\"\r\n)\r\npublic class SubjectCategoryConverterImpl implements SubjectCategoryConverter {\r\n\r\n    @Override\r\n    public SubjectCategory convertBOToCategory(SubjectCategoryBO subjectCategoryBO) {\r\n        if ( subjectCategoryBO == null ) {\r\n            return null;\r\n        }\r\n\r\n        SubjectCategory subjectCategory = new SubjectCategory();\r\n\r\n        subjectCategory.setId( subjectCategoryBO.getId() );\r\n        subjectCategory.setCategoryName( subjectCategoryBO.getCategoryName() );\r\n        subjectCategory.setCategoryType( subjectCategoryBO.getCategoryType() );\r\n        subjectCategory.setImageUrl( subjectCategoryBO.getImageUrl() );\r\n        subjectCategory.setParentId( subjectCategoryBO.getParentId() );\r\n        subjectCategory.setIsDeleted( subjectCategoryBO.getIsDeleted() );\r\n\r\n        return subjectCategory;\r\n    }\r\n\r\n    @Override\r\n    public List<SubjectCategoryBO> convertCategoryToBO(List<SubjectCategory> subjectCategoryList) {\r\n        if ( subjectCategoryList == null ) {\r\n            return null;\r\n        }\r\n\r\n        List<SubjectCategoryBO> list = new ArrayList<SubjectCategoryBO>( subjectCategoryList.size() );\r\n        for ( SubjectCategory subjectCategory : subjectCategoryList ) {\r\n            list.add( subjectCategoryToSubjectCategoryBO( subjectCategory ) );\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n    protected SubjectCategoryBO subjectCategoryToSubjectCategoryBO(SubjectCategory subjectCategory) {\r\n        if ( subjectCategory == null ) {\r\n            return null;\r\n        }\r\n\r\n        SubjectCategoryBO subjectCategoryBO = new SubjectCategoryBO();\r\n\r\n        subjectCategoryBO.setId( subjectCategory.getId() );\r\n        subjectCategoryBO.setCategoryName( subjectCategory.getCategoryName() );\r\n        subjectCategoryBO.setCategoryType( subjectCategory.getCategoryType() );\r\n        subjectCategoryBO.setImageUrl( subjectCategory.getImageUrl() );\r\n        subjectCategoryBO.setParentId( subjectCategory.getParentId() );\r\n        subjectCategoryBO.setIsDeleted( subjectCategory.getIsDeleted() );\r\n\r\n        return subjectCategoryBO;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-domain/target/generated-sources/annotations/edu/cugb/subject/domain/convert/SubjectCategoryConverterImpl.java b/club-subject/club-domain/target/generated-sources/annotations/edu/cugb/subject/domain/convert/SubjectCategoryConverterImpl.java
--- a/club-subject/club-domain/target/generated-sources/annotations/edu/cugb/subject/domain/convert/SubjectCategoryConverterImpl.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-domain/target/generated-sources/annotations/edu/cugb/subject/domain/convert/SubjectCategoryConverterImpl.java	(date 1729744904589)
@@ -8,7 +8,7 @@
 
 @Generated(
     value = "org.mapstruct.ap.MappingProcessor",
-    date = "2024-10-22T13:41:13+0800",
+    date = "2024-10-23T21:47:59+0800",
     comments = "version: 1.4.2.Final, compiler: javac, environment: Java 1.8.0_152 (Oracle Corporation)"
 )
 public class SubjectCategoryConverterImpl implements SubjectCategoryConverter {
Index: .idea/mybatisx/templates.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/mybatisx/templates.xml b/.idea/mybatisx/templates.xml
new file mode 100644
--- /dev/null	(date 1729745763476)
+++ b/.idea/mybatisx/templates.xml	(date 1729745763476)
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="TemplatesSettings">
+    <option name="templateConfigs">
+      <TemplateContext>
+        <option name="projectPath" value="$PROJECT_DIR$" />
+      </TemplateContext>
+    </option>
+  </component>
+</project>
\ No newline at end of file
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectCategoryDao.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.infra.basic.mapper;\r\n\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\nimport org.apache.ibatis.annotations.Param;\r\n\r\nimport java.util.List;\r\n\r\n/**\r\n * 题目分类(SubjectCategory)表数据库访问层\r\n *\r\n * @author makejava\r\n * @since 2024-10-16 11:04:19\r\n */\r\npublic interface SubjectCategoryDao {\r\n\r\n    /**\r\n     * 通过ID查询单条数据\r\n     *\r\n     * @param id 主键\r\n     * @return 实例对象\r\n     */\r\n    SubjectCategory queryById(Long id);\r\n\r\n\r\n    /**\r\n     * 统计总行数\r\n     *\r\n     * @param subjectCategory 查询条件\r\n     * @return 总行数\r\n     */\r\n    long count(SubjectCategory subjectCategory);\r\n\r\n    /**\r\n     * 新增数据\r\n     *\r\n     * @param subjectCategory 实例对象\r\n     * @return 影响行数\r\n     */\r\n    int insert(SubjectCategory subjectCategory);\r\n\r\n    /**\r\n     * 批量新增数据（MyBatis原生foreach方法）\r\n     *\r\n     * @param entities List<SubjectCategory> 实例对象列表\r\n     * @return 影响行数\r\n     */\r\n    int insertBatch(@Param(\"entities\") List<SubjectCategory> entities);\r\n\r\n    /**\r\n     * 批量新增或按主键更新数据（MyBatis原生foreach方法）\r\n     *\r\n     * @param entities List<SubjectCategory> 实例对象列表\r\n     * @return 影响行数\r\n     * @throws org.springframework.jdbc.BadSqlGrammarException 入参是空List的时候会抛SQL语句错误的异常，请自行校验入参\r\n     */\r\n    int insertOrUpdateBatch(@Param(\"entities\") List<SubjectCategory> entities);\r\n\r\n    /**\r\n     * 修改数据\r\n     *\r\n     * @param subjectCategory 实例对象\r\n     * @return 影响行数\r\n     */\r\n    int update(SubjectCategory subjectCategory);\r\n\r\n    /**\r\n     * 通过主键删除数据\r\n     *\r\n     * @param id 主键\r\n     * @return 影响行数\r\n     */\r\n    int deleteById(Long id);\r\n\r\n\r\n    List<SubjectCategory> queryCategory(SubjectCategory subjectCategory);\r\n\r\n\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectCategoryDao.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectCategoryDao.java
--- a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectCategoryDao.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/mapper/SubjectCategoryDao.java	(date 1729744904411)
@@ -71,6 +71,8 @@
      */
     int deleteById(Long id);
 
+    int delete(SubjectCategory subjectCategory);
+
 
     List<SubjectCategory> queryCategory(SubjectCategory subjectCategory);
 
Index: club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/convert/SubjectLabelDTOConverter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/convert/SubjectLabelDTOConverter.java b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/convert/SubjectLabelDTOConverter.java
new file mode 100644
--- /dev/null	(date 1729776323973)
+++ b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/convert/SubjectLabelDTOConverter.java	(date 1729776323973)
@@ -0,0 +1,24 @@
+package edu.cugb.subject.application.convert;
+
+import edu.cugb.subject.application.dto.SubjectCategoryDTO;
+import edu.cugb.subject.application.dto.SubjectLabelDTO;
+import edu.cugb.subject.domain.entity.SubjectCategoryBO;
+import edu.cugb.subject.domain.entity.SubjectLabelBO;
+import org.mapstruct.Mapper;
+import org.mapstruct.factory.Mappers;
+
+import java.util.List;
+
+/**
+ * @Author pengjia
+ * @Data 2024/10/17 15:19
+ * @Description: 标签DTO转换
+ */
+@Mapper
+public interface SubjectLabelDTOConverter {
+    SubjectLabelDTOConverter INSTANCE = Mappers.getMapper(SubjectLabelDTOConverter.class);
+
+    SubjectLabelBO convertDTOToBO(SubjectLabelDTO subjectLabelDTO);
+
+    List<SubjectLabelDTO> convertBOLIstToDTOList(List<SubjectLabelBO> subjectLabelBOList);
+}
Index: club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectLabelDomainService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectLabelDomainService.java b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectLabelDomainService.java
new file mode 100644
--- /dev/null	(date 1729776500478)
+++ b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/SubjectLabelDomainService.java	(date 1729776500478)
@@ -0,0 +1,41 @@
+package edu.cugb.subject.domain.service;
+
+import edu.cugb.subject.domain.entity.SubjectCategoryBO;
+import edu.cugb.subject.domain.entity.SubjectLabelBO;
+
+import java.util.List;
+
+/**
+ * @Author pengjia
+ * @Data 2024/10/17 12:43
+ * @Description:
+ */
+public interface SubjectLabelDomainService {
+
+    /**
+     * 新增标签
+     * @param subjectLabelBO
+     */
+    Boolean add(SubjectLabelBO subjectLabelBO);
+
+    /**
+     * 更新标签
+     * @param subjectLabelBO
+     * @return
+     */
+    Boolean update(SubjectLabelBO subjectLabelBO);
+
+    /**
+     * 删除标签
+     * @param subjectLabelBO
+     * @return
+     */
+    Boolean delete(SubjectLabelBO subjectLabelBO);
+
+    /**
+     * 查询分类下标签
+     * @param subjectLabelBO
+     * @return
+     */
+    List<SubjectLabelBO> queryByCategoryId(SubjectLabelBO subjectLabelBO);
+}
Index: club-subject/club-domain/src/main/java/edu/cugb/subject/domain/entity/SubjectLabelBO.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/entity/SubjectLabelBO.java b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/entity/SubjectLabelBO.java
new file mode 100644
--- /dev/null	(date 1729776536205)
+++ b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/entity/SubjectLabelBO.java	(date 1729776536205)
@@ -0,0 +1,42 @@
+package edu.cugb.subject.domain.entity;
+
+import lombok.Data;
+
+import java.io.Serializable;
+import java.util.Date;
+
+/**
+ * 题目标签表(SubjectLabel)实体类
+ *
+ * @author makejava
+ * @since 2024-10-24 12:52:42
+ */
+
+@Data
+public class SubjectLabelBO implements Serializable {
+    private static final long serialVersionUID = 147840583441771786L;
+
+    /**
+     * 主键
+     */
+    private Long id;
+
+    /**
+     * 分类id
+     */
+
+    private Long categoryId;
+
+    /**
+     * 标签分类
+     */
+    private String labelName;
+
+    /**
+     * 排序
+     */
+    private Integer sortNum;
+
+
+}
+
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectCategoryServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.infra.basic.service.impl;\r\n\r\nimport com.alibaba.fastjson.JSON;\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\nimport edu.cugb.subject.infra.basic.mapper.SubjectCategoryDao;\r\nimport edu.cugb.subject.infra.basic.service.SubjectCategoryService;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.Resource;\r\nimport java.util.List;\r\n\r\n/**\r\n * 题目分类(SubjectCategory)表服务实现类\r\n *\r\n * @author makejava\r\n * @since 2024-10-16 11:04:26\r\n */\r\n@Service(\"subjectCategoryService\")\r\n@Slf4j\r\npublic class SubjectCategoryServiceImpl implements SubjectCategoryService {\r\n    @Resource\r\n    private SubjectCategoryDao subjectCategoryDao;\r\n\r\n    /**\r\n     * 通过ID查询单条数据\r\n     *\r\n     * @param id 主键\r\n     * @return 实例对象\r\n     */\r\n    @Override\r\n    public SubjectCategory queryById(Long id) {\r\n        return this.subjectCategoryDao.queryById(id);\r\n    }\r\n\r\n\r\n    /**\r\n     * 新增数据\r\n     *\r\n     * @param subjectCategory 实例对象\r\n     * @return 实例对象\r\n     */\r\n    @Override\r\n    public SubjectCategory insert(SubjectCategory subjectCategory) {\r\n        if (log.isInfoEnabled()) {\r\n            log.info(\"SubjectCategoryController.add.subjectCategory:{}\", JSON.toJSONString(subjectCategory));\r\n        }\r\n        this.subjectCategoryDao.insert(subjectCategory);\r\n        return subjectCategory;\r\n    }\r\n\r\n    /**\r\n     * 修改数据\r\n     *\r\n     * @param subjectCategory 实例对象\r\n     * @return 实例对象\r\n     */\r\n    @Override\r\n    public SubjectCategory update(SubjectCategory subjectCategory) {\r\n        this.subjectCategoryDao.update(subjectCategory);\r\n        return this.queryById(subjectCategory.getId());\r\n    }\r\n\r\n    /**\r\n     * 通过主键删除数据\r\n     *\r\n     * @param id 主键\r\n     * @return 是否成功\r\n     */\r\n    @Override\r\n    public boolean deleteById(Long id) {\r\n        return this.subjectCategoryDao.deleteById(id) > 0;\r\n    }\r\n\r\n    @Override\r\n    public List<SubjectCategory> queryCategory(SubjectCategory subjectCategory) {\r\n        return this.subjectCategoryDao.queryCategory(subjectCategory);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectCategoryServiceImpl.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectCategoryServiceImpl.java
--- a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectCategoryServiceImpl.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/impl/SubjectCategoryServiceImpl.java	(date 1729744904435)
@@ -56,9 +56,8 @@
      * @return 实例对象
      */
     @Override
-    public SubjectCategory update(SubjectCategory subjectCategory) {
-        this.subjectCategoryDao.update(subjectCategory);
-        return this.queryById(subjectCategory.getId());
+    public int update(SubjectCategory subjectCategory) {
+        return this.subjectCategoryDao.update(subjectCategory);
     }
 
     /**
@@ -76,4 +75,9 @@
     public List<SubjectCategory> queryCategory(SubjectCategory subjectCategory) {
         return this.subjectCategoryDao.queryCategory(subjectCategory);
     }
+
+    @Override
+    public int delete(SubjectCategory subjectCategory) {
+        return this.subjectCategoryDao.delete(subjectCategory);
+    }
 }
Index: club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectLabelDomainServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectLabelDomainServiceImpl.java b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectLabelDomainServiceImpl.java
new file mode 100644
--- /dev/null	(date 1729841312256)
+++ b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/service/impl/SubjectLabelDomainServiceImpl.java	(date 1729841312256)
@@ -0,0 +1,104 @@
+package edu.cugb.subject.domain.service.impl;
+
+import com.alibaba.fastjson.JSON;
+import edu.cugb.subject.common.enums.IsDeletedFlagEnum;
+import edu.cugb.subject.domain.convert.SubjectCategoryConverter;
+import edu.cugb.subject.domain.convert.SubjectLabelConverter;
+import edu.cugb.subject.domain.entity.SubjectCategoryBO;
+import edu.cugb.subject.domain.entity.SubjectLabelBO;
+import edu.cugb.subject.domain.service.SubjectLabelDomainService;
+import edu.cugb.subject.infra.basic.entity.SubjectCategory;
+import edu.cugb.subject.infra.basic.entity.SubjectLabel;
+import edu.cugb.subject.infra.basic.entity.SubjectMapping;
+import edu.cugb.subject.infra.basic.service.SubjectLabelService;
+import edu.cugb.subject.infra.basic.service.SubjectMappingService;
+import lombok.extern.slf4j.Slf4j;
+import org.springframework.stereotype.Service;
+import org.springframework.util.CollectionUtils;
+
+import javax.annotation.Resource;
+import java.util.Collections;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.stream.Collectors;
+
+/**
+ * @Author pengjia
+ * @Data 2024/10/17 14:39
+ * @Description:
+ */
+@Service
+@Slf4j
+public class SubjectLabelDomainServiceImpl implements SubjectLabelDomainService {
+
+    @Resource
+    private SubjectLabelService subjectLabelService;
+    @Resource
+    private SubjectMappingService subjectMappingService;
+
+
+    /**
+     * 新增分类
+     *
+     * @param subjectLabelBO
+     */
+    @Override
+    public Boolean add(SubjectLabelBO subjectLabelBO) {
+        if (log.isInfoEnabled()) {
+            log.info("SubjectLabelController.add.bo:{}", JSON.toJSONString(subjectLabelBO));
+        }
+        SubjectLabel subjectLabel = SubjectLabelConverter.INSTANCE
+                .convertBOToLabel(subjectLabelBO);
+        subjectLabel.setIsDeleted(IsDeletedFlagEnum.Un_DELETED.getCode());
+        int count = subjectLabelService.insert(subjectLabel);
+        return count > 0;
+    }
+
+    /**
+     * 更新分类
+     *
+     * @param subjectLabelBO
+     * @return
+     */
+    @Override
+    public Boolean update(SubjectLabelBO subjectLabelBO) {
+        SubjectLabel subjectLabel = SubjectLabelConverter.INSTANCE
+                .convertBOToLabel(subjectLabelBO);
+        int count = subjectLabelService.update(subjectLabel);
+        return count > 0;
+    }
+
+    @Override
+    public Boolean delete(SubjectLabelBO subjectLabelBO) {
+        SubjectLabel subjectLabel = SubjectLabelConverter.INSTANCE
+                .convertBOToLabel(subjectLabelBO);
+        subjectLabel.setIsDeleted(IsDeletedFlagEnum.DELETED.getCode());
+        int count = subjectLabelService.update(subjectLabel);
+        return count > 0;
+    }
+
+    @Override
+    public List<SubjectLabelBO> queryByCategoryId(SubjectLabelBO subjectLabelBO) {
+        Long categoryId = subjectLabelBO.getCategoryId();
+        SubjectMapping subjectMapping = new SubjectMapping();
+        subjectMapping.setIsDeleted(IsDeletedFlagEnum.Un_DELETED.getCode());
+        List<SubjectMapping> mappingList = subjectMappingService.queryLabelId(subjectMapping);
+        if (CollectionUtils.isEmpty(mappingList)) {
+            return Collections.emptyList();
+        }
+        List<Long> labelIdList = mappingList.stream().map(SubjectMapping::getLabelId).collect(Collectors.toList());
+        List<SubjectLabel> labelList = subjectLabelService.batchQueryById(labelIdList);
+        List<SubjectLabelBO> boList = new LinkedList<>();
+        labelList.forEach(label -> {
+            SubjectLabelBO bo = new SubjectLabelBO();
+            bo.setId(label.getId());
+            bo.setLabelName(label.getLabelName());
+            bo.setSortNum(label.getSortNum());
+            bo.setCategoryId(categoryId);
+            boList.add(bo);
+        });
+        return boList;
+    }
+
+
+}
Index: club-subject/club-infra/src/main/resources/mapper/SubjectCategoryDao.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\r\n<mapper namespace=\"edu.cugb.subject.infra.basic.mapper.SubjectCategoryDao\">\r\n\r\n    <resultMap type=\"edu.cugb.subject.infra.basic.entity.SubjectCategory\" id=\"SubjectCategoryMap\">\r\n        <result property=\"id\" column=\"id\" jdbcType=\"INTEGER\"/>\r\n        <result property=\"categoryName\" column=\"category_name\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"categoryType\" column=\"category_type\" jdbcType=\"INTEGER\"/>\r\n        <result property=\"imageUrl\" column=\"image_url\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"parentId\" column=\"parent_id\" jdbcType=\"INTEGER\"/>\r\n        <result property=\"createdBy\" column=\"created_by\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"createdTime\" column=\"created_time\" jdbcType=\"TIMESTAMP\"/>\r\n        <result property=\"updateBy\" column=\"update_by\" jdbcType=\"VARCHAR\"/>\r\n        <result property=\"updateTime\" column=\"update_time\" jdbcType=\"TIMESTAMP\"/>\r\n        <result property=\"isDeleted\" column=\"is_deleted\" jdbcType=\"INTEGER\"/>\r\n    </resultMap>\r\n\r\n    <!--查询单个-->\r\n    <select id=\"queryById\" resultMap=\"SubjectCategoryMap\">\r\n        select id,\r\n               category_name,\r\n               category_type,\r\n               image_url,\r\n               parent_id,\r\n               created_by,\r\n               created_time,\r\n               update_by,\r\n               update_time,\r\n               is_deleted\r\n        from subject_category\r\n        where id = #{id}\r\n    </select>\r\n\r\n    <!--查询指定行数据-->\r\n    <select id=\"queryAllByLimit\" resultMap=\"SubjectCategoryMap\">\r\n        select\r\n        id,\r\n        category_name,\r\n        category_type,\r\n        image_url,\r\n        parent_id,\r\n        created_by,\r\n        created_time,\r\n        update_by,\r\n        update_time,\r\n        is_deleted\r\n        from subject_category\r\n        <where>\r\n            <if test=\"id != null\">\r\n                and id = #{id}\r\n            </if>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                and category_name = #{categoryName}\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                and category_type = #{categoryType}\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                and image_url = #{imageUrl}\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                and parent_id = #{parentId}\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                and created_by = #{createdBy}\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                and created_time = #{createdTime}\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                and update_by = #{updateBy}\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                and update_time = #{updateTime}\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                and is_deleted = #{isDeleted}\r\n            </if>\r\n        </where>\r\n        limit #{pageable.offset}, #{pageable.pageSize}\r\n    </select>\r\n\r\n    <!--统计总行数-->\r\n    <select id=\"count\" resultType=\"java.lang.Long\">\r\n        select count(1)\r\n        from subject_category\r\n        <where>\r\n            <if test=\"id != null\">\r\n                and id = #{id}\r\n            </if>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                and category_name = #{categoryName}\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                and category_type = #{categoryType}\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                and image_url = #{imageUrl}\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                and parent_id = #{parentId}\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                and created_by = #{createdBy}\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                and created_time = #{createdTime}\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                and update_by = #{updateBy}\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                and update_time = #{updateTime}\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                and is_deleted = #{isDeleted}\r\n            </if>\r\n        </where>\r\n    </select>\r\n    <select id=\"queryCategory\" resultMap=\"SubjectCategoryMap\">\r\n        select *\r\n        from subject_category\r\n        <where>\r\n            <if test=\"id != null\">\r\n                and id = #{id}\r\n            </if>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                and category_name = #{categoryName}\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                and category_type = #{categoryType}\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                and image_url = #{imageUrl}\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                and parent_id = #{parentId}\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                and created_by = #{createdBy}\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                and created_time = #{createdTime}\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                and update_by = #{updateBy}\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                and update_time = #{updateTime}\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                and is_deleted = #{isDeleted}\r\n            </if>\r\n        </where>\r\n    </select>\r\n\r\n\r\n    <!--新增所有列-->\r\n    <insert id=\"insert\" keyProperty=\"id\" useGeneratedKeys=\"true\">\r\n        insert into subject_category(category_name, category_type, image_url, parent_id, created_by, created_time,\r\n                                     update_by, update_time, is_deleted)\r\n        values (#{categoryName}, #{categoryType}, #{imageUrl}, #{parentId}, #{createdBy}, #{createdTime}, #{updateBy},\r\n                #{updateTime}, #{isDeleted})\r\n    </insert>\r\n\r\n    <!--插入批量-->\r\n    <insert id=\"insertBatch\" keyProperty=\"id\" useGeneratedKeys=\"true\">\r\n        insert into\r\n        subject_category(category_name,category_type,image_url,parent_id,created_by,created_time,update_by,update_time,is_deleted)\r\n        values\r\n        <foreach collection=\"entities\" item=\"entity\" separator=\",\">\r\n            (#{entity.categoryName},#{entity.categoryType},#{entity.imageUrl},#{entity.parentId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})\r\n        </foreach>\r\n    </insert>\r\n\r\n    <!--新增批量-->\r\n    <insert id=\"insertOrUpdateBatch\" keyProperty=\"id\" useGeneratedKeys=\"true\">\r\n        insert into\r\n        subject_category(category_name,category_type,image_url,parent_id,created_by,created_time,update_by,update_time,is_deleted)\r\n        values\r\n        <foreach collection=\"entities\" item=\"entity\" separator=\",\">\r\n            (#{entity.categoryName},#{entity.categoryType},#{entity.imageUrl},#{entity.parentId},#{entity.createdBy},#{entity.createdTime},#{entity.updateBy},#{entity.updateTime},#{entity.isDeleted})\r\n        </foreach>\r\n        on duplicate key update\r\n        category_name = values(category_name),\r\n        category_type = values(category_type),\r\n        image_url = values(image_url),\r\n        parent_id= values(parent_id),\r\n        created_by = values(created_by),\r\n        created_time = values(created_time),\r\n        update_by = values(update_by),\r\n        update_time = values(update_time),\r\n        is_deleted = values(is_deleted)\r\n    </insert>\r\n\r\n    <!--通过主键修改数据-->\r\n    <update id=\"update\">\r\n        update subject_category\r\n        <set>\r\n            <if test=\"categoryName != null and categoryName != ''\">\r\n                category_name = #{categoryName},\r\n            </if>\r\n            <if test=\"categoryType != null\">\r\n                category_type = #{categoryType},\r\n            </if>\r\n            <if test=\"imageUrl != null and imageUrl != ''\">\r\n                image_url = #{imageUrl},\r\n            </if>\r\n            <if test=\"parentId != null\">\r\n                parent_id = #{parentId},\r\n            </if>\r\n            <if test=\"createdBy != null and createdBy != ''\">\r\n                created_by = #{createdBy},\r\n            </if>\r\n            <if test=\"createdTime != null\">\r\n                created_time = #{createdTime},\r\n            </if>\r\n            <if test=\"updateBy != null and updateBy != ''\">\r\n                update_by = #{updateBy},\r\n            </if>\r\n            <if test=\"updateTime != null\">\r\n                update_time = #{updateTime},\r\n            </if>\r\n            <if test=\"isDeleted != null\">\r\n                is_deleted = #{isDeleted},\r\n            </if>\r\n        </set>\r\n        where id = #{id}\r\n    </update>\r\n\r\n    <!--通过主键删除-->\r\n    <delete id=\"deleteById\">\r\n        delete\r\n        from subject_category\r\n        where id = #{id}\r\n    </delete>\r\n\r\n</mapper>\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/resources/mapper/SubjectCategoryDao.xml b/club-subject/club-infra/src/main/resources/mapper/SubjectCategoryDao.xml
--- a/club-subject/club-infra/src/main/resources/mapper/SubjectCategoryDao.xml	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-infra/src/main/resources/mapper/SubjectCategoryDao.xml	(date 1729744904467)
@@ -235,5 +235,11 @@
         where id = #{id}
     </delete>
 
+    <delete id="delete">
+        UPDATE subject_category
+        set is_deleted = 1
+        where id = #{id}
+    </delete>
+
 </mapper>
 
Index: club-subject/club-domain/src/main/java/edu/cugb/subject/domain/convert/SubjectLabelConverter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/convert/SubjectLabelConverter.java b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/convert/SubjectLabelConverter.java
new file mode 100644
--- /dev/null	(date 1729749274669)
+++ b/club-subject/club-domain/src/main/java/edu/cugb/subject/domain/convert/SubjectLabelConverter.java	(date 1729749274669)
@@ -0,0 +1,24 @@
+package edu.cugb.subject.domain.convert;
+
+import edu.cugb.subject.domain.entity.SubjectCategoryBO;
+import edu.cugb.subject.domain.entity.SubjectLabelBO;
+import edu.cugb.subject.infra.basic.entity.SubjectCategory;
+import edu.cugb.subject.infra.basic.entity.SubjectLabel;
+import org.mapstruct.Mapper;
+import org.mapstruct.factory.Mappers;
+
+import java.util.List;
+
+/**
+ * @Author pengjia
+ * @Data 2024/10/17 15:19
+ * @Description:
+ */
+@Mapper
+public interface SubjectLabelConverter {
+    SubjectLabelConverter INSTANCE = Mappers.getMapper(SubjectLabelConverter.class);
+
+    SubjectLabel convertBOToLabel(SubjectLabelBO subjectLabelBO);
+
+
+}
Index: club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectCategoryService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.infra.basic.service;\r\n\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\n\r\nimport java.util.List;\r\n\r\n\r\n/**\r\n * 题目分类(SubjectCategory)表服务接口\r\n *\r\n * @author makejava\r\n * @since 2024-10-16 11:04:25\r\n */\r\npublic interface SubjectCategoryService {\r\n\r\n    /**\r\n     * 通过ID查询单条数据\r\n     *\r\n     * @param id 主键\r\n     * @return 实例对象\r\n     */\r\n    SubjectCategory queryById(Long id);\r\n\r\n\r\n    /**\r\n     * 新增数据\r\n     *\r\n     * @param subjectCategory 实例对象\r\n     * @return 实例对象\r\n     */\r\n    SubjectCategory insert(SubjectCategory subjectCategory);\r\n\r\n    /**\r\n     * 修改数据\r\n     *\r\n     * @param subjectCategory 实例对象\r\n     * @return 实例对象\r\n     */\r\n    SubjectCategory update(SubjectCategory subjectCategory);\r\n\r\n    /**\r\n     * 通过主键删除数据\r\n     *\r\n     * @param id 主键\r\n     * @return 是否成功\r\n     */\r\n    boolean deleteById(Long id);\r\n\r\n    /**\r\n     * 查询岗位大类\r\n     *\r\n     * @return\r\n     */\r\n    List<SubjectCategory> queryCategory(SubjectCategory subjectCategory);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectCategoryService.java b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectCategoryService.java
--- a/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectCategoryService.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-infra/src/main/java/edu/cugb/subject/infra/basic/service/SubjectCategoryService.java	(date 1729744904600)
@@ -36,7 +36,7 @@
      * @param subjectCategory 实例对象
      * @return 实例对象
      */
-    SubjectCategory update(SubjectCategory subjectCategory);
+    int update(SubjectCategory subjectCategory);
 
     /**
      * 通过主键删除数据
@@ -52,4 +52,6 @@
      * @return
      */
     List<SubjectCategory> queryCategory(SubjectCategory subjectCategory);
+
+    int delete(SubjectCategory subjectCategory);
 }
Index: club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.cugb.subject.application.controller;\r\n\r\nimport edu.cugb.subject.infra.basic.entity.SubjectCategory;\r\nimport edu.cugb.subject.infra.basic.service.SubjectCategoryService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport javax.annotation.Resource;\r\n\r\n/**\r\n * @Author pengjia\r\n * @Data 2024/10/16 9:22\r\n * @Description:\r\n */\r\n@RestController\r\npublic class SubjectController {\r\n    @Resource\r\n    private SubjectCategoryService subjectCategoryService;\r\n\r\n    @GetMapping((\"/test\"))\r\n    public String test() {\r\n        SubjectCategory subjectCategory = subjectCategoryService.queryById(1L);\r\n        return subjectCategory.getCategoryName();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectController.java b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectController.java
--- a/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectController.java	(revision f32a2bbe6e1af765b0ff992ee297ebf5847c9b7e)
+++ b/club-subject/club-application/club-application-controller/src/main/java/edu/cugb/subject/application/controller/SubjectController.java	(date 1729747164440)
@@ -14,6 +14,7 @@
  * @Description:
  */
 @RestController
+
 public class SubjectController {
     @Resource
     private SubjectCategoryService subjectCategoryService;
